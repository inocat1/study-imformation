<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è‹±èªå–®å­—ç¶œåˆç‰¹è¨“åŸºåœ°</title>
    <style>
        :root {
            --primary: #3b82f6;       /* åœ‹ä¸­å€å¡Šè—è‰² */
            --hs-color: #8b5cf6;      /* é«˜ä¸­å€å¡Šç´«è‰² */
            --sentence-color: #f59e0b; /* ä¾‹å¥æŒ‘æˆ°é»ƒè‰² */
            --success: #10b981;
            --error: #ef4444;
            --bg: #f3f4f6;
            --card: #ffffff;
            --text: #1f2937;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background-color: var(--bg);
            color: var(--text);
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            min-height: 100vh;
        }

        .container {
            width: 100%;
            max-width: 600px;
            background: var(--card);
            border-radius: 16px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            padding: 20px;
            position: relative;
            overflow: hidden;
            padding-bottom: 50px;
        }

        /* æ¨™é¡Œèˆ‡å°èˆª */
        header {
            text-align: center;
            margin-bottom: 20px;
            border-bottom: 2px solid #e5e7eb;
            padding-bottom: 10px;
        }

        h1 { margin: 0; font-size: 1.5rem; color: #1f2937; }
        .subtitle { color: #6b7280; font-size: 0.9rem; margin-top: 5px; }

        /* è¦–åœ–åˆ‡æ› */
        .view { display: none; animation: fadeIn 0.3s; }
        .view.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        /* --- é¦–é é¸å–®ä½ˆå±€ --- */
        .section-header {
            font-size: 1.1rem;
            font-weight: bold;
            margin: 20px 0 10px 0;
            padding-left: 10px;
            border-left: 5px solid #ccc;
            display: flex;
            align-items: center;
        }

        .menu-grid { display: grid; gap: 10px; }
        
        .mode-section {
            background: #f9fafb;
            padding: 15px;
            border-radius: 10px;
            border: 1px solid #e5e7eb;
        }

        .mode-title { font-weight: bold; margin-bottom: 10px; color: #4b5563; font-size: 0.95rem; }

        /* æŒ‰éˆ•æ¨£å¼ */
        .btn-group {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px;
        }

        button {
            width: 100%;
            padding: 12px;
            border: none;
            border-radius: 8px;
            font-size: 0.95rem;
            cursor: pointer;
            transition: 0.2s;
            background-color: #6b7280;
            color: white;
            font-weight: bold;
        }

        button:hover { opacity: 0.9; transform: translateY(-1px); }
        
        /* é¡è‰²ä¸»é¡Œ */
        .btn-blue { background-color: var(--primary); }
        .btn-purple { background-color: var(--hs-color); }
        .btn-orange { background-color: var(--sentence-color); }
        .btn-full { grid-column: span 2; }
        
        button.outline { background: transparent; border: 2px solid #6b7280; color: #6b7280; margin-top: 10px; }

        /* å–®å­—å¡åˆ—è¡¨ */
        .word-list {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            max-height: 65vh;
            overflow-y: auto;
        }
        .word-card {
            background: #eff6ff;
            padding: 10px;
            border-radius: 8px;
            text-align: center;
            border: 1px solid #bfdbfe;
            cursor: pointer;
        }
        .wc-tag { font-size: 0.7rem; color: #666; background: #eee; border-radius: 4px; padding: 2px 6px; display: inline-block; margin-bottom: 4px;}
        .wc-en { font-weight: bold; font-size: 1.1rem; color: #1f2937; }
        .wc-zh { font-size: 0.9rem; color: #555; }

        /* æ¸¬é©—æ¨¡å¼ */
        .quiz-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            font-size: 0.9rem;
            color: #6b7280;
        }

        .progress-bar {
            height: 6px;
            background: #e5e7eb;
            border-radius: 3px;
            margin-bottom: 20px;
            overflow: hidden;
        }
        .progress-fill {
            height: 100%;
            background: var(--primary);
            width: 0%;
            transition: width 0.3s;
        }

        .question-card {
            background: #f8fafc;
            padding: 30px 20px;
            border-radius: 12px;
            text-align: center;
            margin-bottom: 20px;
            min-height: 120px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            position: relative;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        /* å–®å­—é¡Œé¡¯ç¤º */
        .q-word { font-size: 2rem; font-weight: bold; color: var(--text); }
        
        /* ä¾‹å¥é¡Œé¡¯ç¤º */
        .q-sentence { 
            font-size: 1.15rem; 
            font-weight: 500; 
            color: #374151; 
            text-align: left; 
            line-height: 1.5;
        }
        .q-sentence-zh {
            font-size: 0.9rem;
            color: #6b7280;
            margin-top: 12px;
            border-top: 1px dashed #cbd5e1;
            padding-top: 8px;
            width: 100%;
            text-align: left;
        }

        .speak-btn {
            background: none;
            border: none;
            color: #666;
            font-size: 1.5rem;
            cursor: pointer;
            padding: 0;
            margin-top: 10px;
            width: auto;
        }
        .speak-btn:hover { color: var(--primary); }

        .options-grid { display: grid; gap: 10px; }
        
        .option-btn {
            background: white;
            border: 2px solid #e5e7eb;
            color: var(--text);
            text-align: left;
            padding: 15px;
            font-size: 1rem;
        }

        .option-btn:hover { background: #f9fafb; border-color: #d1d5db; }
        .option-btn.correct { background: #d1fae5; border-color: var(--success); color: #065f46; }
        .option-btn.wrong { background: #fee2e2; border-color: var(--error); color: #991b1b; }

        /* çµæœé é¢ */
        .result-score { font-size: 3.5rem; font-weight: bold; color: #1f2937; text-align: center; }
        .result-msg { text-align: center; margin-bottom: 20px; color: #6b7280; }
        
    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>å–®å­—ç‰¹è¨“åŸºåœ°</h1>
        <div class="subtitle">åœ‹ä¸­ B5 & å²¡è¾² Units 37-39</div>
    </header>

    <!-- 1. é¦–é é¸å–® View -->
    <div id="menu-view" class="view active">
        
        <!-- å€å¡Šä¸€ï¼šåœ‹ä¸­ B5 -->
        <div class="section-header" style="border-color: var(--primary); color: var(--primary);">
            ğŸ”µ åœ‹ä¸­è‹±èª B5 (L5 ~ L6)
        </div>
        <div class="menu-grid">
            <div class="mode-section">
                <div class="mode-title">ğŸ“– å–®å­—å¡æ¨¡å¼</div>
                <div class="btn-group">
                    <button class="btn-blue" onclick="startStudy('B5-L5')">L5 å–®å­—</button>
                    <button class="btn-blue" onclick="startStudy('B5-L6')">L6 å–®å­—</button>
                    <button class="btn-blue btn-full" onclick="startStudy('B5_ALL')" style="background-color: #2563eb;">å…¨éƒ¨ B5 å–®å­—</button>
                </div>
            </div>
            <div class="mode-section">
                <div class="mode-title">ğŸ“ æ¸¬é©—æ¨¡å¼ (å››é¸ä¸€)</div>
                <div class="btn-group">
                    <button class="btn-blue" onclick="startWordQuiz('B5-L5')">æ¸¬é©— L5</button>
                    <button class="btn-blue" onclick="startWordQuiz('B5-L6')">æ¸¬é©— L6</button>
                    <button class="btn-blue btn-full" onclick="startWordQuiz('B5_ALL')" style="background-color: #2563eb;">æ¸¬é©— B5 å…¨éƒ¨</button>
                </div>
            </div>
        </div>

        <!-- å€å¡ŠäºŒï¼šé«˜ä¸­ Units 37-39 -->
        <div class="section-header" style="border-color: var(--hs-color); color: var(--hs-color); margin-top: 30px;">
            ğŸŸ£ å²¡è¾²è‹±èª (Units 37 ~ 39)
        </div>
        <div class="menu-grid">
            <div class="mode-section">
                <div class="mode-title">ğŸ“– å–®å­—å¡æ¨¡å¼</div>
                <div class="btn-group">
                    <button class="btn-purple" onclick="startStudy('Unit 37')">Unit 37</button>
                    <button class="btn-purple" onclick="startStudy('Unit 38')">Unit 38</button>
                    <button class="btn-purple" onclick="startStudy('Unit 39')">Unit 39</button>
                    <button class="btn-purple" onclick="startStudy('HS_ALL')">å…¨éƒ¨å–®å…ƒ</button>
                </div>
            </div>
            <div class="mode-section">
                <div class="mode-title">ğŸ“ æ¸¬é©—æ¨¡å¼ (å››é¸ä¸€)</div>
                <div class="btn-group">
                    <button class="btn-purple" onclick="startWordQuiz('Unit 37')">æ¸¬é©— U37</button>
                    <button class="btn-purple" onclick="startWordQuiz('Unit 38')">æ¸¬é©— U38</button>
                    <button class="btn-purple" onclick="startWordQuiz('Unit 39')">æ¸¬é©— U39</button>
                    <button class="btn-purple" onclick="startWordQuiz('HS_ALL')">æ¸¬é©—æ··å’Œ</button>
                </div>
            </div>
            
            <!-- ç‰¹åˆ¥æŒ‘æˆ°ï¼šä¾‹å¥å¡«ç©º -->
            <div class="mode-section" style="background: #fffbeb; border-color: var(--sentence-color);">
                <div class="mode-title" style="color: #b45309;">ğŸ¯ é€²éšæŒ‘æˆ°</div>
                <button class="btn-orange" onclick="startSentenceQuiz()">Unit 37 ä¾‹å¥å¡«ç©ºæ¸¬é©—</button>
            </div>
        </div>

    </div>

    <!-- 2. å–®å­—å¡åˆ—è¡¨ View -->
    <div id="study-view" class="view">
        <button onclick="showMenu()" class="outline" style="margin-bottom:15px;">â† å›ä¸»é¸å–®</button>
        <div id="study-list" class="word-list">
            <!-- JS æœƒå¡å…¥å–®å­—å¡ -->
        </div>
    </div>

    <!-- 3. æ¸¬é©— View -->
    <div id="quiz-view" class="view">
        <div class="quiz-header">
            <span id="quiz-progress">1 / 10</span>
            <span id="quiz-score">Score: 0</span>
        </div>
        <div class="progress-bar"><div id="progress-fill" class="progress-fill"></div></div>

        <!-- é¡Œç›®å¡ç‰‡å€åŸŸ (å–®å­—æˆ–å¥å­) -->
        <div id="question-card" class="question-card">
            <!-- å…§å®¹ç”± JS å‹•æ…‹ç”Ÿæˆ -->
        </div>

        <div id="options-container" class="options-grid">
            <!-- é¸é …æŒ‰éˆ• -->
        </div>

        <button onclick="showMenu()" class="outline" style="margin-top:20px;">é€€å‡ºæ¸¬é©—</button>
    </div>

    <!-- 4. çµæœ View -->
    <div id="result-view" class="view">
        <div class="result-score" id="final-score">100</div>
        <div class="result-msg">æ¸¬é©—çµæŸï¼</div>
        <div id="wrong-list" class="word-list" style="margin-bottom:20px;"></div>
        <button onclick="showMenu()" class="btn-blue">å›ä¸»é¸å–®</button>
    </div>

</div>

<script>
    // ================= LINE åµæ¸¬ =================
    if (navigator.userAgent.indexOf("Line") > -1) {
        const warningDiv = document.createElement('div');
        warningDiv.style.cssText = "position:fixed; top:0; left:0; width:100%; background:#ff9800; color:white; z-index:9999; padding:15px; text-align:center; font-weight:bold; box-shadow:0 2px 10px rgba(0,0,0,0.2);";
        warningDiv.innerHTML = "âš ï¸ åµæ¸¬åˆ°æ‚¨ä½¿ç”¨ LINE é–‹å•Ÿ<br>èªéŸ³å¯èƒ½å¤±æ•ˆï¼Œå»ºè­°ä½¿ç”¨ç€è¦½å™¨é–‹å•Ÿã€‚";
        document.body.prepend(warningDiv);
    }

    // ================= è³‡æ–™åº« =================
    
    // 1. ç¶œåˆå–®å­—è³‡æ–™åº« (åŒ…å«åŸæœ¬çš„ B5 å’Œæ–°çš„ High School)
    const wordData = [
        // --- åœ‹ä¸­ B5 L5 ---
        { t: "B5-L5", en: "arrive", zh: "æŠµé”" },
        { t: "B5-L5", en: "planet", zh: "è¡Œæ˜Ÿ" },
        { t: "B5-L5", en: "appear", zh: "å‡ºç¾" },
        { t: "B5-L5", en: "camera", zh: "ç›¸æ©Ÿ" },
        { t: "B5-L5", en: "restroom", zh: "æ´—æ‰‹é–“" },
        { t: "B5-L5", en: "bath", zh: "æ²æµ´" },
        { t: "B5-L5", en: "uniform", zh: "åˆ¶æœ" },
        { t: "B5-L5", en: "tail", zh: "å°¾å·´" },
        { t: "B5-L5", en: "bottom", zh: "è‡€éƒ¨; åº•éƒ¨" },
        { t: "B5-L5", en: "main", zh: "ä¸»è¦çš„" },
        { t: "B5-L5", en: "notice", zh: "æ³¨æ„åˆ°" },
        { t: "B5-L5", en: "belong", zh: "å±¬æ–¼" },
        { t: "B5-L5", en: "square", zh: "æ­£æ–¹å½¢çš„" },
        { t: "B5-L5", en: "string", zh: "ä¸²; ç·š" },
        { t: "B5-L5", en: "round", zh: "åœ“å½¢çš„" },
        { t: "B5-L5", en: "dot", zh: "åœ“é»" },
        { t: "B5-L5", en: "bow", zh: "è´è¶çµ" },
        { t: "B5-L5", en: "pin", zh: "èƒ¸é‡" },
        { t: "B5-L5", en: "neighbor", zh: "é„°å±…" },
        { t: "B5-L5", en: "foreigner", zh: "å¤–åœ‹äºº" },
        { t: "B5-L5", en: "hobby", zh: "å—œå¥½" },
        { t: "B5-L5", en: "businessman", zh: "å•†äºº" },
        { t: "B5-L5", en: "business", zh: "ç”Ÿæ„" },
        { t: "B5-L5", en: "dictionary", zh: "å­—å…¸" },
        { t: "B5-L5", en: "workbook", zh: "ä½œæ¥­æœ¬" },
        { t: "B5-L5", en: "born", zh: "å‡ºç”Ÿçš„" },
        { t: "B5-L5", en: "be no stranger to", zh: "å°...ä¸é™Œç”Ÿ" },
        { t: "B5-L5", en: "prize", zh: "ç" },
        { t: "B5-L5", en: "topic", zh: "ä¸»é¡Œ" },
        { t: "B5-L5", en: "knowledge", zh: "çŸ¥è­˜" },
        { t: "B5-L5", en: "public", zh: "å…¬çœ¾çš„" },
        { t: "B5-L5", en: "go on", zh: "ç™¼ç”Ÿ" },
        { t: "B5-L5", en: "lead", zh: "é€šå¾€" },
        { t: "B5-L5", en: "play", zh: "æ‰®æ¼”" },
        { t: "B5-L5", en: "exercise", zh: "ç¿’é¡Œ" },
        { t: "B5-L5", en: "comic book convention", zh: "æ¼«ç•«å±•" },
        { t: "B5-L5", en: "booth", zh: "æ”¤ä½" },
        { t: "B5-L5", en: "character", zh: "è§’è‰²" },
        { t: "B5-L5", en: "hug", zh: "æ“æŠ±" },
        { t: "B5-L5", en: "describe", zh: "æè¿°" },
        { t: "B5-L5", en: "noun", zh: "åè©" },
        { t: "B5-L5", en: "pearl", zh: "çç " },
        { t: "B5-L5", en: "cosplayer", zh: "è§’è‰²æ‰®æ¼”è€…" },

        // --- åœ‹ä¸­ B5 L6 ---
        { t: "B5-L6", en: "apartment", zh: "å…¬å¯“" },
        { t: "B5-L6", en: "glad", zh: "é«˜èˆˆçš„" },
        { t: "B5-L6", en: "town", zh: "å°é®" },
        { t: "B5-L6", en: "polite", zh: "æœ‰ç¦®è²Œçš„" },
        { t: "B5-L6", en: "seat", zh: "åº§ä½" },
        { t: "B5-L6", en: "beside", zh: "åœ¨â€¦æ—é‚Š" },
        { t: "B5-L6", en: "except", zh: "é™¤äº†" },
        { t: "B5-L6", en: "blank", zh: "ç©ºç™½çš„" },
        { t: "B5-L6", en: "present", zh: "ç¦®ç‰©" },
        { t: "B5-L6", en: "invite", zh: "é‚€è«‹" },
        { t: "B5-L6", en: "perhaps", zh: "ä¹Ÿè¨±" },
        { t: "B5-L6", en: "side", zh: "å´é¢" },
        { t: "B5-L6", en: "sidewalk", zh: "äººè¡Œé“" },
        { t: "B5-L6", en: "blind", zh: "ç›²çš„" },
        { t: "B5-L6", en: "April foolâ€™s day", zh: "æ„šäººç¯€" },
        { t: "B5-L6", en: "tape", zh: "ç”¨è† å¸¶é»" },
        { t: "B5-L6", en: "paper", zh: "ç´™" },
        { t: "B5-L6", en: "joke", zh: "ç¬‘è©±" },
        { t: "B5-L6", en: "visitor", zh: "éŠå®¢; è¨ªå®¢" },
        { t: "B5-L6", en: "somewhere", zh: "åœ¨æŸè™•" },
        { t: "B5-L6", en: "mud", zh: "æ³¥å·´" },
        { t: "B5-L6", en: "ahead", zh: "åœ¨å‰æ–¹" },
        { t: "B5-L6", en: "heat", zh: "é«˜æº«; åŠ ç†±" },
        { t: "B5-L6", en: "rise", zh: "å‡èµ·" },
        { t: "B5-L6", en: "lazy", zh: "æ‡¶æƒ°" },
        { t: "B5-L6", en: "have bigger fish to fry", zh: "æœ‰æ›´é‡è¦çš„äº‹è¦åš" },
        { t: "B5-L6", en: "smoke", zh: "ç…™éœ§; æŠ½è¸" },
        { t: "B5-L6", en: "cover", zh: "è¦†è“‹" },
        { t: "B5-L6", en: "used to", zh: "éå»æ™‚å¸¸" },
        { t: "B5-L6", en: "appear", zh: "ä¼¼ä¹" },
        { t: "B5-L6", en: "lie", zh: "èºº" },
        { t: "B5-L6", en: "draw", zh: "æå–" },
        { t: "B5-L6", en: "spell", zh: "å’’èª" },
        { t: "B5-L6", en: "France", zh: "æ³•åœ‹" },
        { t: "B5-L6", en: "worthless", zh: "æ²’æœ‰åƒ¹å€¼çš„" },
        { t: "B5-L6", en: "chat", zh: "èŠå¤©" },
        { t: "B5-L6", en: "resist", zh: "æŠµæŠ—" },
        { t: "B5-L6", en: "Braille", zh: "ç›²äººé»å­—æ³•" },
        { t: "B5-L6", en: "the Louvre", zh: "ç¾…æµ®å®®" },
        { t: "B5-L6", en: "complain", zh: "æŠ±æ€¨" },
        { t: "B5-L6", en: "fairy", zh: "ç²¾éˆ; ä»™å­" },
        { t: "B5-L6", en: "jewel", zh: "å¯¶çŸ³" },

        // --- é«˜ä¸­ Unit 37 ---
        { t: "Unit 37", en: "equipment", zh: "è¨­å‚™; è£å‚™" },
        { t: "Unit 37", en: "facility", zh: "è¨­æ–½ï¼›è¨­å‚™" },
        { t: "Unit 37", en: "device", zh: "è£ç½®ï¼›è¨­å‚™" },
        { t: "Unit 37", en: "identical", zh: "ç›¸åŒçš„ï¼›ä¸€æ¨¡ä¸€æ¨£çš„" },
        { t: "Unit 37", en: "confess", zh: "å¦æ‰¿ï¼›å‘Šç™½" },
        { t: "Unit 37", en: "tremendous", zh: "å·¨å¤§çš„ï¼›é©šäººçš„" },
        { t: "Unit 37", en: "massive", zh: "å¤§é‡çš„ï¼›å·¨å¤§çš„" },
        { t: "Unit 37", en: "extensive", zh: "å»£æ³›çš„ï¼›å¤§é‡çš„" },
        { t: "Unit 37", en: "expend", zh: "èŠ±è²»; æ¶ˆè€—" },
        { t: "Unit 37", en: "expand", zh: "æ“´å¼µï¼›æ“´å¤§" },
        { t: "Unit 37", en: "inflation", zh: "é€šè²¨è†¨è„¹" },
        { t: "Unit 37", en: "recession", zh: "ç¶“æ¿Ÿè¡°é€€" },
        { t: "Unit 37", en: "generation", zh: "ä¸–ä»£" },
        { t: "Unit 37", en: "gap", zh: "å·®è·ï¼›ç¼ºå£" },
        { t: "Unit 37", en: "tremble", zh: "é¡«æŠ–" },
        { t: "Unit 37", en: "vibrate", zh: "éœ‡å‹•" },
        { t: "Unit 37", en: "quote", zh: "å¼•è¿°ï¼›å¼•ç”¨ï¼›å ±åƒ¹" },
        { t: "Unit 37", en: "ornament", zh: "è£é£¾å“" },
        { t: "Unit 37", en: "decorate", zh: "è£é£¾ï¼›å¸ƒç½®" },
        { t: "Unit 37", en: "accessory", zh: "é…ä»¶ï¼›é£¾å“" },
        { t: "Unit 37", en: "atmosphere", zh: "æ°£æ°›ï¼›å¤§æ°£å±¤" },
        { t: "Unit 37", en: "astronaut", zh: "å¤ªç©ºäºº" },
        { t: "Unit 37", en: "satellite", zh: "è¡›æ˜Ÿ" },
        { t: "Unit 37", en: "complicate", zh: "ä½¿è¤‡é›œ" },
        { t: "Unit 37", en: "ridiculous", zh: "è’è¬¬çš„ï¼›å¯ç¬‘çš„" },
        { t: "Unit 37", en: "glacier", zh: "å†°æ²³" },
        { t: "Unit 37", en: "adolescent", zh: "é’å°‘å¹´ï¼›é’æ˜¥æœŸçš„" },
        { t: "Unit 37", en: "sacrifice", zh: "çŠ§ç‰²" },
        { t: "Unit 37", en: "immune", zh: "å…ç–«çš„ï¼›ä¸å—å½±éŸ¿çš„" },
        { t: "Unit 37", en: "vague", zh: "æ¨¡ç³Šçš„" },
        { t: "Unit 37", en: "instead of", zh: "è€Œä¸æ˜¯" },
        { t: "Unit 37", en: "be opposed to", zh: "åå°" },
        { t: "Unit 37", en: "suffer from", zh: "å—â€¦ä¹‹è‹¦ï¼›æ‚£æœ‰" },
        { t: "Unit 37", en: "in vain", zh: "å¾’ç„¶ï¼›ç™½è²»" },
        { t: "Unit 37", en: "let alone", zh: "æ›´ä¸ç”¨èªª" },
        { t: "Unit 37", en: "fool around", zh: "é¬¼æ··ï¼›è™›åº¦å…‰é™°" },

        // --- é«˜ä¸­ Unit 38 ---
        { t: "Unit 38", en: "instinct", zh: "æœ¬èƒ½" },
        { t: "Unit 38", en: "instruction", zh: "æ•™å°ï¼›å‘½ä»¤" },
        { t: "Unit 38", en: "institute", zh: "è¨‚ç«‹ï¼›å”æœƒ" },
        { t: "Unit 38", en: "instrument", zh: "å„€å™¨ï¼›æ¨‚å™¨" },
        { t: "Unit 38", en: "associate", zh: "èˆ‡..æœ‰é—œè¯" },
        { t: "Unit 38", en: "organization", zh: "çµ„ç¹”" },
        { t: "Unit 38", en: "recognition", zh: "èªå¯ï¼›è¾¨è­˜" },
        { t: "Unit 38", en: "foundation", zh: "åŸºç¤ï¼›åŸºé‡‘æœƒ" },
        { t: "Unit 38", en: "extinguish", zh: "å¹³æ¯ï¼›ç†„æ»…" },
        { t: "Unit 38", en: "distinguished", zh: "å‚‘å‡ºçš„ï¼›å“è¶Šçš„" },
        { t: "Unit 38", en: "gradually", zh: "é€æ¼¸åœ°" },
        { t: "Unit 38", en: "superstition", zh: "è¿·ä¿¡" },
        { t: "Unit 38", en: "supervise", zh: "ç›£ç£" },
        { t: "Unit 38", en: "resemble", zh: "ç›¸åƒ" },
        { t: "Unit 38", en: "assembly", zh: "é›†æœƒï¼›çµ„åˆ" },
        { t: "Unit 38", en: "appetite", zh: "é£Ÿæ…¾" },
        { t: "Unit 38", en: "prohibition", zh: "ç¦æ­¢ï¼›ç¦ä»¤" },
        { t: "Unit 38", en: "forbid", zh: "ç¦æ­¢" },
        { t: "Unit 38", en: "confine", zh: "é™åˆ¶ï¼›ç¦é–‰" },
        { t: "Unit 38", en: "definitely", zh: "å¿…å®šåœ°ï¼›è‚¯å®šåœ°" },
        { t: "Unit 38", en: "magnificent", zh: "å£¯éº—çš„ï¼›å®å‰çš„" },
        { t: "Unit 38", en: "significant", zh: "é‡è¦çš„ï¼›æœ‰æ„ç¾©çš„" },
        { t: "Unit 38", en: "illuminate", zh: "ç…§äº®ï¼›é—¡æ˜" },
        { t: "Unit 38", en: "illustrate", zh: "èˆ‰ä¾‹èªªæ˜" },
        { t: "Unit 38", en: "frustrate", zh: "æŒ«æ•—ï¼›ä½¿æ²®å–ª" },
        { t: "Unit 38", en: "gender", zh: "æ€§åˆ¥" },
        { t: "Unit 38", en: "penalty", zh: "è™•ç½°ï¼›åˆ‘ç½°" },
        { t: "Unit 38", en: "abandon", zh: "æ”¾æ£„ï¼›æ‹‹æ£„" },
        { t: "Unit 38", en: "lotion", zh: "ä¹³æ¶²" },
        { t: "Unit 38", en: "pirate", zh: "æµ·ç›œ; ç›œå°è€…" },
        { t: "Unit 38", en: "make up", zh: "å’Œå¥½; åŒ–å¦" },
        { t: "Unit 38", en: "tell apart", zh: "åˆ†è¾¨" },
        { t: "Unit 38", en: "separate from", zh: "èˆ‡â€¦â€¦åˆ†é–‹" },
        { t: "Unit 38", en: "on the other hand", zh: "å¦ä¸€æ–¹é¢" },
        { t: "Unit 38", en: "make ends meet", zh: "æ”¶æ”¯å¹³è¡¡" },
        { t: "Unit 38", en: "be associated with", zh: "èˆ‡â€¦â€¦æœ‰é—œè¯" },

        // --- é«˜ä¸­ Unit 39 ---
        { t: "Unit 39", en: "appreciate", zh: "æ„Ÿæ¿€ï¼›æ¬£è³" },
        { t: "Unit 39", en: "appropriate", zh: "é©ç•¶çš„" },
        { t: "Unit 39", en: "adequate", zh: "è¶³å¤ çš„" },
        { t: "Unit 39", en: "position", zh: "ä½ç½®ï¼›è·ä½" },
        { t: "Unit 39", en: "positive", zh: "æ­£é¢çš„ï¼›ç©æ¥µçš„" },
        { t: "Unit 39", en: "negative", zh: "è² é¢çš„ï¼›æ¶ˆæ¥µçš„" },
        { t: "Unit 39", en: "pessimistic", zh: "æ‚²è§€çš„" },
        { t: "Unit 39", en: "negotiate", zh: "è«‡åˆ¤ï¼›å”å•†" },
        { t: "Unit 39", en: "elementary", zh: "åˆæ­¥çš„ï¼›åˆç´šçš„" },
        { t: "Unit 39", en: "essential", zh: "å¿…è¦çš„ï¼›ä¸å¯æˆ–ç¼ºçš„" },
        { t: "Unit 39", en: "fundamental", zh: "åŸºç¤çš„ï¼›æ ¹æœ¬çš„" },
        { t: "Unit 39", en: "primarily", zh: "ä¸»è¦åœ°" },
        { t: "Unit 39", en: "anniversary", zh: "é€±å¹´ç´€å¿µ" },
        { t: "Unit 39", en: "hesitate", zh: "çŒ¶è±«" },
        { t: "Unit 39", en: "estimate", zh: "ä¼°è¨ˆ" },
        { t: "Unit 39", en: "intimate", zh: "è¦ªå¯†çš„" },
        { t: "Unit 39", en: "imitation", zh: "æ¨¡ä»¿ï¼›ä»¿è£½å“" },
        { t: "Unit 39", en: "irritate", zh: "æ¿€æ€’ï¼›åˆºæ¿€" },
        { t: "Unit 39", en: "corporation", zh: "å…¬å¸ï¼›æ³•äºº" },
        { t: "Unit 39", en: "abundant", zh: "è±å¯Œçš„" },
        { t: "Unit 39", en: "resort", zh: "æ±‚åŠ©; åº¦å‡å‹åœ°" },
        { t: "Unit 39", en: "souvenir", zh: "ç´€å¿µå“" },
        { t: "Unit 39", en: "harmony", zh: "å’Œè«§" },
        { t: "Unit 39", en: "stationary", zh: "ä¸å‹•çš„" },
        { t: "Unit 39", en: "inspiration", zh: "æ¿€å‹µ; éˆæ„Ÿ" },
        { t: "Unit 39", en: "comprehend", zh: "é ˜æœƒ; äº†è§£" },
        { t: "Unit 39", en: "thermometer", zh: "æº«åº¦è¨ˆ" },
        { t: "Unit 39", en: "famine", zh: "é¥‘è’" },
        { t: "Unit 39", en: "reckless", zh: "é­¯è½çš„" },
        { t: "Unit 39", en: "terminal", zh: "çµ‚é»ç«™ï¼›æœ«æœŸçš„" },
        { t: "Unit 39", en: "take advantage of", zh: "åˆ©ç”¨" },
        { t: "Unit 39", en: "get one's own way", zh: "ç‚ºæ‰€æ¬²ç‚º" },
        { t: "Unit 39", en: "uncondition that", zh: "å‡ä½¿; ä»¥..ç‚ºæ¢ä»¶" },
        { t: "Unit 39", en: "be qualified for", zh: "æœ‰â€¦è³‡æ ¼" },
        { t: "Unit 39", en: "keep in shape", zh: "ä¿æŒèº«æ" },
        { t: "Unit 39", en: "in perspective", zh: "æ­£ç¢ºåœ°" }
    ];

    // 2. ä¾‹å¥å¡«ç©ºè³‡æ–™åº« (Unit 37)
    const sentenceData = [
        { q: "You can buy sports _____ at the store.", a: "equipment", zh: "ä½ å¯ä»¥åœ¨é‚£å®¶å•†åº—è²·åˆ°é«”è‚²ç”¨å“ã€‚" },
        { q: "Una purchased second-hand _____ in order to lower the cost of starting a business.", a: "facilities", zh: "å„ªå¨œç‚ºäº†è¦é™ä½å‰µæ¥­çš„æˆæœ¬,è³¼è²·äº†äºŒæ‰‹çš„è¨­å‚™ã€‚" },
        { q: "We hope the scientists can invent a _____ to predict coming earthquakes.", a: "device", zh: "æˆ‘å€‘å¸Œæœ›ç§‘å­¸å®¶å€‘èƒ½ç™¼æ˜å¯ä»¥é æ¸¬åœ°éœ‡å³å°‡ä¾†è‡¨çš„è£ç½®ã€‚" },
        { q: "Our points of view about the plan are _____.", a: "identical", zh: "æˆ‘å€‘å°é‚£å€‹è¨ˆç•«çš„è§€é»æ˜¯ç›¸åŒçš„ã€‚" },
        { q: "I must _____ to you that I didn't tell the truth yesterday.", a: "confess", zh: "æˆ‘å¿…é ˆå‘ä½ å¦ç™½æˆ‘æ˜¨å¤©æ²’èªªå¯¦è©±ã€‚" },
        { q: "Panda babies are weak and need _____ care.", a: "tremendous", zh: "ç†Šè²“å¯¶å¯¶å¾ˆè™›å¼±ä¸¦ä¸”éœ€è¦å¤§é‡çš„ç…§è­·ã€‚" },
        { q: "There were _____ landslides in the mountains during the storm.", a: "massive", zh: "æš´é¢¨é›¨æœŸé–“å±±ä¸­æœ‰å¤§é‡çš„åœŸçŸ³æµã€‚" },
        { q: "We can get _____ knowledge by exploring the Internet.", a: "extensive", zh: "æˆ‘å€‘å¯ä»¥è—‰ç”±æœå°‹ç¶²è·¯ä¾†å¾—åˆ°å»£æ³›çš„çŸ¥è­˜ã€‚" },
        { q: "Don't _____ your energy on such a mere trifle.", a: "expend", zh: "åˆ¥è€—è²»ç²¾åŠ›åœ¨é€™æ¨£çš„å°äº‹ã€‚å°ˆæ³¨æ–¼ä½ çš„å·¥ä½œå§ã€‚" },
        { q: "The longest escalator in the world _____ from the foot of the hill to the hillside.", a: "expands", zh: "ä¸–ç•Œä¸Šæœ€é•·çš„æ‰‹æ‰¶æ¢¯,æ˜¯å¾å±±è…³å»¶ä¼¸åˆ°å±±å¡ã€‚" },
        { q: "Our expense on daily necessities increases because of _____.", a: "inflation", zh: "å› ç‚ºé€šè²¨è†¨è„¹,æˆ‘å€‘æ—¥å¸¸å¿…éœ€å“çš„èŠ±è²»å¢åŠ äº†" },
        { q: "Many factories closed down... during the period of economic _____.", a: "recession", zh: "åœ¨ç¶“æ¿Ÿè¡°é€€æ™‚æœŸ,è¨±å¤šå·¥å» å€’é–‰ä¸”è¨±å¤šäººå¤±æ¥­ã€‚" },
        { q: "The heirlooms are handed down from _____ to generation.", a: "generation", zh: "é‚£å€‹å‚³å®¶å¯¶è¢«ä¸€ä»£ä¸€ä»£åœ°å‚³ä¸‹å»ã€‚" },
        { q: "There is always some generation _____ between parents and children.", a: "gap", zh: "çˆ¶æ¯å’Œå°å­©ä¹‹é–“ç¸½æ˜¯æœ‰ä»£æºã€‚" },
        { q: "His lips _____ with fear when seeing a big cockroach in front of him.", a: "trembled", zh: "ç•¶çœ‹åˆ°ä¸€éš»å¤§èŸ‘è‚å‡ºç¾åœ¨ä»–é¢å‰æ™‚,ä»–çš„å˜´å”‡å› å®³æ€•è€Œé¡«æŠ–è‘—ã€‚" },
        { q: "The house _____ a little when strong winds struck.", a: "vibrated", zh: "ç•¶å¼·é¢¨ä¾†è¥²æ™‚,å±‹å­å¾®å¾®æ™ƒå‹•ã€‚" },
        { q: "The price they _____ is higher than that of another company.", a: "quoted", zh: "ä»–å€‘å ±çš„åƒ¹æ ¼æ¯”å¦ä¸€å®¶å…¬å¸é«˜ã€‚" },
        { q: "The bathroom was _____ with pictures of landscape.", a: "ornamented", zh: "å»æ‰€è£é£¾è‘—é¢¨æ™¯ç•«ã€‚" },
        { q: "When we _____ our homes, we choose colors that welcome us...", a: "decorate", zh: "ç•¶æˆ‘å€‘è£é£¾æˆ‘å€‘çš„æˆ¿å­æ™‚,æˆ‘å€‘é¸æ“‡æœƒæ­¡è¿æˆ‘å€‘çš„é¡è‰²..." },
        { q: "After Daniel bought a mountain bike, he also had to get many _____ for it.", a: "accessories", zh: "åœ¨ä¸¹å°¼çˆ¾è²·äº†ä¸€å°ç™»å±±è»Šä¹‹å¾Œ,ä»–ä¹Ÿå¿…é ˆç‚ºé€™å°è»Šè²·è¨±å¤šé…ä»¶ã€‚" },
        { q: "We like to have dinner in that restaurant because it has a romantic _____.", a: "atmosphere", zh: "æˆ‘å€‘å–œæ­¡åœ¨é‚£å®¶é¤å»³åƒæ™šé¤,å› ç‚ºå®ƒæœ‰æµªæ¼«çš„æ°£æ°›ã€‚" },
        { q: "It is great progress for human civilization to send the _____ to the moon safely.", a: "astronauts", zh: "å®‰å…¨åœ°å°‡å¤ªç©ºäººé€æŠµæœˆçƒæ˜¯äººé¡æ–‡æ˜çš„ä¸€å¤§é€²æ­¥ã€‚" },
        { q: "They launched an artificial _____ for lunar probes.", a: "satellite", zh: "ä»–å€‘ç™¼å°„ä¸€é¡†äººé€ è¡›æ˜Ÿä¾†åšæœˆçƒæ¢æ¸¬ã€‚" },
        { q: "The coming of a heavy typhoon _____ the arrangement of the wedding ceremony.", a: "complicates", zh: "å¼·é¢±çš„ä¾†è‡¨ä½¿å¾—å©šç¦®çš„å®‰æ’æ›´è¤‡é›œäº†ã€‚" },
        { q: "It is _____ of you to ask me such a private question...", a: "ridiculous", zh: "æ—¢ç„¶æˆ‘å€‘èªè­˜å½¼æ­¤ä¸æ·±,ä½ å•æˆ‘é€™æ¨£éš±ç§çš„å•é¡ŒçœŸæ˜¯è »è’è¬¬çš„ã€‚" },
        { q: "The _____ are melting and cause the sea level to rise.", a: "glaciers", zh: "å†°æ²³æ­£èåŒ–,ä¸¦ä¸”å°è‡´æµ·å¹³é¢ä¸Šå‡" },
        { q: "Many _____ like to wear either tight or baggy clothes.", a: "adolescents", zh: "ç¾ä»Šè¨±å¤šé’å°‘å¹´ä¸æ˜¯å–œæ­¡ç©¿ç·Šèº«çš„,å°±æ˜¯å¯¬å®çš„è¡£æœã€‚" },
        { q: "Some people _____ health for wealth in their youth.", a: "sacrifice", zh: "æœ‰äº›äººåœ¨å¹´è¼•æ™‚çŠ§ç‰²å¥åº·ä»¥æ›å–è²¡å¯Œã€‚" },
        { q: "The Congressmen are _____ from arrest during the session of Congress.", a: "immune", zh: "åœ‹æœƒè­°å“¡åœ¨é–‹æœƒæœŸé–“å…å—æ‹˜æ•ã€‚" },
        { q: "The Witness was _____ about what happened on the spot.", a: "vague", zh: "è­‰äººå°æ–¼ç•¶å ´ç™¼ç”Ÿäº†ä»€éº¼äº‹,èªªå¾—å¾ˆå«ç³Šã€‚" },
        { q: "Can you pick up my grandmother... _____ of me?", a: "instead", zh: "ä½ å¯ä¸å¯ä»¥ä»£æ›¿æˆ‘å»å…¬è»Šç«™æ¥æˆ‘çš„å¥¶å¥¶å‘¢?" },
        { q: "Many people are _____ to euthanasia.", a: "opposed", zh: "è¨±å¤šäººåå°å®‰æ¨‚æ­»ã€‚" },
        { q: "He _____ from lovesickness after his girlfriend had left him.", a: "suffered", zh: "å¥³å‹é›¢é–‹ä»–ä¹‹å¾Œ,ä»–é­å—ç›¸æ€ä¹‹è‹¦ã€‚" },
        { q: "We tried to cheer him up but it was in _____.", a: "vain", zh: "æˆ‘å€‘è©¦è‘—è®“ä»–é–‹å¿ƒèµ·ä¾†,ä½†å»å¾’å‹ç„¡åŠŸ" },
        { q: "I didn't go out on that day, _____ alone shopped at that store.", a: "let", zh: "æˆ‘é‚£å¤©ä¸¦æ²’æœ‰å‡ºé–€,æ›´ä¸ç”¨èªªåœ¨é‚£å®¶å•†åº—è³¼ç‰©äº†ã€‚" },
        { q: "Jamin has _____ around in his youth. Now he regrets it very much.", a: "fooled", zh: "å‚‘æ˜è™›åº¦äº†ä»–çš„å°‘å¹´æ™‚æœŸã€‚ç¾åœ¨ä»–å¾ˆå¾Œæ‚”ã€‚" }
    ];

    // ================= ç¨‹å¼é‚è¼¯ =================

    let currentQuizList = [];
    let currentIndex = 0;
    let score = 0;
    let wrongAnswers = [];
    let isAnswered = false;
    let quizType = 'word'; // 'word' (ä¸­é¸è‹±/è‹±é¸ä¸­) æˆ– 'sentence' (å¡«ç©º)

    // 1. åˆ‡æ›ç•«é¢
    function switchView(viewId) {
        document.querySelectorAll('.view').forEach(el => el.classList.remove('active'));
        document.getElementById(viewId).classList.add('active');
        window.scrollTo(0, 0);
    }

    function showMenu() {
        switchView('menu-view');
        window.speechSynthesis.cancel();
    }

    // 2. å–®å­—å¡æ¨¡å¼
    function startStudy(tag) {
        let list = [];
        
        if (tag === 'B5_ALL') {
            list = wordData.filter(item => item.t.startsWith("B5"));
        } else if (tag === 'HS_ALL') {
            list = wordData.filter(item => item.t.startsWith("Unit"));
        } else {
            list = wordData.filter(item => item.t === tag);
        }

        const container = document.getElementById('study-list');
        container.innerHTML = "";
        
        list.forEach(item => {
            let colorStyle = item.t.startsWith("Unit") ? "background:#f3e8ff; border-color:#d8b4fe; color:#6b21a8;" : "";
            container.innerHTML += `
                <div class="word-card" onclick="speakText('${item.en}')">
                    <div class="wc-tag" style="${colorStyle}">${item.t}</div>
                    <div class="wc-en">${item.en}</div>
                    <div class="wc-zh">${item.zh}</div>
                </div>
            `;
        });
        switchView('study-view');
    }

    // 3. å–®å­—æ¸¬é©—æ¨¡å¼
    function startWordQuiz(tag) {
        quizType = 'word';
        // ç¯©é¸é¡Œç›®
        if (tag === 'B5_ALL') {
            currentQuizList = wordData.filter(item => item.t.startsWith("B5"));
        } else if (tag === 'HS_ALL') {
            currentQuizList = wordData.filter(item => item.t.startsWith("Unit"));
        } else {
            currentQuizList = wordData.filter(item => item.t === tag);
        }
        
        initQuiz();
    }

    // 4. ä¾‹å¥æ¸¬é©—æ¨¡å¼
    function startSentenceQuiz() {
        quizType = 'sentence';
        currentQuizList = JSON.parse(JSON.stringify(sentenceData)); // æ·±æ‹·è²
        initQuiz();
    }

    function initQuiz() {
        shuffle(currentQuizList);
        currentIndex = 0;
        score = 0;
        wrongAnswers = [];
        isAnswered = false;
        
        // è¨­å®šé€²åº¦æ¢é¡è‰²
        const fill = document.getElementById('progress-fill');
        if (quizType === 'sentence') {
            fill.style.background = 'var(--sentence-color)';
        } else if (currentQuizList[0] && currentQuizList[0].t && currentQuizList[0].t.startsWith("Unit")) {
            fill.style.background = 'var(--hs-color)';
        } else {
            fill.style.background = 'var(--primary)';
        }

        loadQuestion();
        switchView('quiz-view');
    }

    function loadQuestion() {
        if (currentIndex >= currentQuizList.length) {
            showResult();
            return;
        }

        isAnswered = false;
        const q = currentQuizList[currentIndex];
        
        // æ›´æ–° UI
        document.getElementById('quiz-progress').innerText = `${currentIndex + 1} / ${currentQuizList.length}`;
        document.getElementById('quiz-score').innerText = `Score: ${score}`;
        document.getElementById('progress-fill').style.width = `${((currentIndex) / currentQuizList.length) * 100}%`;

        const questionCard = document.getElementById('question-card');
        const optContainer = document.getElementById('options-container');
        optContainer.innerHTML = "";

        if (quizType === 'word') {
            // å–®å­—é¡Œ
            questionCard.innerHTML = `
                <div class="q-word">${q.en}</div>
                <button class="speak-btn" onclick="speakText('${q.en}')">ğŸ”Š</button>
            `;
            
            // é¸é …ç”¢ç”Ÿ (ä¸­æ–‡)
            let options = [q];
            let distractors = wordData.filter(x => x.en !== q.en);
            shuffle(distractors);
            options.push(...distractors.slice(0, 3));
            shuffle(options);

            options.forEach(opt => {
                const btn = document.createElement('button');
                btn.className = 'option-btn';
                btn.innerText = opt.zh;
                btn.onclick = () => checkAnswer(opt.en, q.en, btn); 
                optContainer.appendChild(btn);
            });

        } else {
            // ä¾‹å¥é¡Œ
            questionCard.innerHTML = `
                <div class="q-sentence">${q.q}</div>
                <div class="q-sentence-zh">${q.zh}</div>
            `;

            // é¸é …ç”¢ç”Ÿ (è‹±æ–‡å–®å­—)
            let correctAns = q.a;
            let options = [correctAns];
            
            // å¾ Unit 37 å–®å­—åº«æ‰¾å¹²æ“¾é … (æ’é™¤ç­”æ¡ˆæœ¬èº«)
            let unit37Words = wordData.filter(item => item.t === "Unit 37").map(item => item.en);
            let distractors = unit37Words.filter(w => !correctAns.includes(w) && w !== correctAns);
            
            shuffle(distractors);
            options.push(...distractors.slice(0, 3));
            shuffle(options);

            options.forEach(opt => {
                const btn = document.createElement('button');
                btn.className = 'option-btn';
                btn.innerText = opt;
                btn.onclick = () => checkAnswer(opt, correctAns, btn);
                optContainer.appendChild(btn);
            });
        }
    }

    function checkAnswer(selectedVal, correctVal, btn) {
        if (isAnswered) return;
        isAnswered = true;

        const allBtns = document.querySelectorAll('.option-btn');
        
        if (selectedVal === correctVal) {
            score++;
            btn.classList.add('correct');
            // å¦‚æœæ˜¯ä¾‹å¥é¡Œï¼Œå¡«ç©ºä¸¦æœ—è®€
            if (quizType === 'sentence') {
                document.querySelector('.q-sentence').innerHTML = 
                    document.querySelector('.q-sentence').innerHTML.replace('_____', `<span style="color:var(--success); border-bottom:2px solid var(--success);">${correctVal}</span>`);
                //speakText(document.querySelector('.q-sentence').innerText); 
            } else {
                //speakText(correctVal); 
            }
        } else {
            btn.classList.add('wrong');
            wrongAnswers.push(currentQuizList[currentIndex]);
            
            // æ¨™ç¤ºæ­£ç¢ºç­”æ¡ˆ
            allBtns.forEach(b => {
                if (quizType === 'word') {
                    // åæŸ¥ä¸­æ–‡ä¾†æ¨™ç¤º
                    let correctItem = wordData.find(i => i.en === correctVal);
                    if (correctItem && b.innerText === correctItem.zh) b.classList.add('correct');
                } else {
                    if (b.innerText === correctVal) b.classList.add('correct');
                }
            });
        }

        setTimeout(() => {
            currentIndex++;
            loadQuestion();
        }, 1500);
    }

    function showResult() {
        document.getElementById('final-score').innerText = Math.round((score / currentQuizList.length) * 100);
        const wrongList = document.getElementById('wrong-list');
        wrongList.innerHTML = "";
        
        if (wrongAnswers.length > 0) {
            wrongList.innerHTML = "<h3>ğŸ’¡ éœ€è¤‡ç¿’ï¼š</h3>";
            wrongAnswers.forEach(item => {
                if(item.en) {
                    // å–®å­—é¡Œ
                    wrongList.innerHTML += `
                        <div class="word-card" style="border-color:#fca5a5; background:#fef2f2;" onclick="speakText('${item.en}')">
                            <div class="wc-en">${item.en}</div>
                            <div class="wc-zh">${item.zh}</div>
                        </div>
                    `;
                } else {
                    // ä¾‹å¥é¡Œ
                    wrongList.innerHTML += `
                        <div class="word-card" style="border-color:#fca5a5; background:#fef2f2; text-align:left;">
                            <div class="wc-en" style="font-size:1rem; margin-bottom:5px;">${item.q.replace('_____', `<u>${item.a}</u>`)}</div>
                            <div class="wc-zh">${item.zh}</div>
                        </div>
                    `;
                }
            });
        } else {
            wrongList.innerHTML = "<h3>ğŸ‰ å¤ªå¼·äº†ï¼å…¨éƒ¨ç­”å°ï¼</h3>";
        }

        switchView('result-view');
    }

    function shuffle(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
    }

    function speakText(text) {
        window.speechSynthesis.cancel();
        const utterance = new SpeechSynthesisUtterance(text);
        
        let voices = window.speechSynthesis.getVoices();
        let enVoice = voices.find(v => v.lang.includes('en'));
        if (enVoice) utterance.voice = enVoice;
        
        utterance.lang = 'en-US';
        utterance.volume = 1;
        utterance.rate = 0.85;

        window.speechSynthesis.speak(utterance);
    }

</script>

</body>
</html>
