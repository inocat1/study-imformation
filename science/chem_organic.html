<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>é«˜ä¸­åŒ–å­¸å…¨èƒ½ç‰¹è¨“</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* # è¨­å®šæ ¸å¿ƒè®Šæ•¸ï¼Œé¢¨æ ¼å®Œå…¨å°æ¨™è‹±æ–‡ç‰ˆ App */
        :root {
            --primary: #2563eb;       /* è—è‰²ä¸»é¡Œ */
            --primary-light: #dbeafe;
            --success: #059669;
            --error: #dc2626;
            --bg: #f8fafc;
            --card: #ffffff;
            --text: #1e293b;
            --gray: #64748b;
            --slot-bg: #e2e8f0;
            --chem-teal: #0d9488;    /* ç­†è¨˜æ¨¡å¼çš„åŒ–å­¸ç¶  */
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

        body {
            font-family: 'Noto Sans TC', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); /* ç´«è‰²æ¼¸å±¤èƒŒæ™¯ */
            color: var(--text);
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            min-height: 100vh;
        }

        .container {
            width: 100%;
            max-width: 650px;
            background: rgba(255, 255, 255, 0.98);
            min-height: 100vh;
            border-radius: 24px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            display: flex;
            flex-direction: column;
            overflow: hidden;
            position: relative;
        }

        /* --- Header --- */
        header {
            text-align: center;
            padding: 20px;
            background: #fff;
            position: sticky;
            top: 0;
            z-index: 50;
            border-bottom: 1px solid #e2e8f0;
        }
        .back-btn {
            position: absolute; left: 15px; top: 18px;
            background: #f1f5f9; border: none; padding: 8px 15px; border-radius: 20px;
            font-size: 0.9rem; color: var(--gray); font-weight: bold; cursor: pointer; text-decoration: none;
        }
        h1 { margin: 0; font-size: 1.5rem; color: #333; letter-spacing: 1px; }

        /* --- Tabs åˆ†é åˆ‡æ› (åƒé¦–é ä¸€æ¨£åˆ†é–‹) --- */
        .tab-container {
            display: flex;
            justify-content: center;
            padding: 15px;
            background: #f8fafc;
            gap: 15px;
        }
        .tab-btn {
            padding: 10px 25px;
            border: none;
            border-radius: 50px;
            font-size: 1rem;
            font-weight: bold;
            color: var(--gray);
            background: #e2e8f0;
            cursor: pointer;
            transition: 0.3s;
        }
        .tab-btn.active {
            background: var(--primary);
            color: white;
            box-shadow: 0 4px 10px rgba(37, 99, 235, 0.3);
        }

        /* --- å…§å®¹å€å¡Š --- */
        .view-section { display: none; padding: 20px; flex: 1; overflow-y: auto; }
        .view-section.active { display: block; animation: fadeIn 0.3s ease; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }

        /* ==================== [View 1] ç­†è¨˜æ¨¡å¼ ==================== */
        .note-card {
            background: #fff; border-radius: 12px; padding: 25px; margin-bottom: 30px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05); border-left: 5px solid var(--chem-teal);
        }
        h2 { color: var(--chem-teal); margin-top: 0; margin-bottom: 20px; font-size: 1.3rem; border-bottom: 1px dashed #cbd5e1; padding-bottom: 10px; }
        .table-wrapper { overflow-x: auto; }
        table { width: 100%; border-collapse: collapse; font-size: 0.95rem; min-width: 600px; }
        th { background-color: var(--chem-teal); color: white; padding: 12px; text-align: left; }
        td { border-bottom: 1px solid #e2e8f0; padding: 12px; vertical-align: top; }
        tr:nth-child(even) { background-color: #f8fafc; }
        .formula { font-family: 'Courier New', monospace; background: #f3e8ff; padding: 2px 6px; border-radius: 4px; color: #7e22ce; font-weight: bold; }
        .highlight { color: #b45309; font-weight: bold; background: #fffbeb; padding: 0 3px; }
        .tag { display: inline-block; padding: 2px 8px; border-radius: 10px; font-size: 0.8rem; color: white; margin-bottom: 5px; font-weight: bold; }
        .tag-med { background: #ef4444; } .tag-clean { background: #3b82f6; } .tag-poly { background: #8b5cf6; }

        /* ==================== [View 2] æ¸¬é©—å°ˆå€ ==================== */
        .stats-panel {
            background: var(--primary); color: white; padding: 20px; border-radius: 16px;
            margin-bottom: 20px; display: flex; justify-content: space-between; align-items: center;
        }
        .chapter-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; padding-bottom: 100px; }
        .chapter-card {
            background: #fff; border: 2px solid #e2e8f0; border-radius: 16px; padding: 15px;
            cursor: pointer; transition: 0.2s; position: relative; min-height: 90px; display: flex; flex-direction: column; justify-content: center;
        }
        .chapter-card.selected { border-color: var(--primary); background-color: #eff6ff; }
        .chapter-card.selected::after {
            content: 'âœ“'; position: absolute; top: 10px; right: 10px; background: var(--primary); color: white;
            border-radius: 50%; width: 22px; height: 22px; font-size: 12px; display: flex; align-items: center; justify-content: center;
        }

        .bottom-dock {
            position: absolute; bottom: 0; left: 0; width: 100%;
            background: rgba(255, 255, 255, 0.95); padding: 15px 20px;
            border-top: 1px solid #e2e8f0; display: flex; gap: 12px; z-index: 100;
        }
        .start-btn {
            width: 100%; padding: 16px; border: none; border-radius: 50px;
            font-size: 1.1rem; font-weight: bold; cursor: pointer; transition: 0.2s;
            background: var(--primary); color: white; box-shadow: 0 4px 15px rgba(37, 99, 235, 0.3);
        }
        .start-btn:disabled { background: #cbd5e1; box-shadow: none; cursor: not-allowed; }

        /* æ¸¬é©—é€²è¡Œä¸­ */
        .quiz-status { display: flex; justify-content: space-between; margin-bottom: 10px; font-weight: bold; color: var(--gray); font-size: 0.9rem; }
        .progress-bar { height: 8px; background: #e2e8f0; border-radius: 4px; margin-bottom: 25px; overflow: hidden; }
        .progress-fill { height: 100%; background: var(--primary); width: 0%; transition: 0.3s; }
        
        .question-card {
            background: white; padding: 30px 20px; border-radius: 20px; text-align: center;
            box-shadow: 0 10px 25px rgba(0,0,0,0.05); margin-bottom: 25px; border: 1px solid #f1f5f9;
            min-height: 200px; display: flex; flex-direction: column; justify-content: center; align-items: center;
        }
        .q-text { font-size: 1.3rem; font-weight: 800; color: #333; line-height: 1.6; }
        
        .options-grid { display: grid; gap: 12px; width: 100%; }
        .opt-btn {
            background: white; border: 2px solid #e2e8f0; padding: 18px; border-radius: 16px;
            font-size: 1.1rem; text-align: left; cursor: pointer; transition: 0.2s; color: var(--text);
        }
        .opt-btn.correct { background: #dcfce7; border-color: var(--success); color: #166534; font-weight: bold; }
        .opt-btn.wrong { background: #fee2e2; border-color: var(--error); color: #991b1b; }

        /* å¡«ç©ºé¡Œå°ˆç”¨ */
        .drop-slot {
            display: inline-flex; min-width: 80px; height: 36px; background: #e2e8f0;
            border-bottom: 3px solid #94a3b8; border-radius: 6px; margin: 0 5px;
            vertical-align: middle; align-items: center; justify-content: center;
            color: #64748b; font-weight: bold; padding: 0 8px;
        }
        .drop-slot.filled { background: transparent; border: none; border-bottom: 3px solid var(--primary); color: var(--primary); }
        .drag-pool { display: flex; flex-wrap: wrap; gap: 10px; justify-content: center; margin-top: 20px; }
        .drag-item {
            background: white; border: 2px solid var(--primary); color: var(--primary);
            padding: 10px 20px; border-radius: 30px; font-weight: bold; cursor: pointer;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .feedback-box {
            display: none; background: #f0fdfa; padding: 20px; border-radius: 16px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.05); margin-top: 20px; text-align: left;
            border: 2px solid var(--success); animation: slideUp 0.3s;
        }
        @keyframes slideUp { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }

        /* å½ˆçª— */
        .modal-overlay {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5);
            display: none; justify-content: center; align-items: center; z-index: 100; backdrop-filter: blur(3px);
        }
        .modal {
            background: white; padding: 30px; border-radius: 24px; width: 85%; max-width: 360px; text-align: center;
        }
        .num-input {
            font-size: 2.5rem; padding: 10px; width: 120px; text-align: center;
            border: 2px solid #e2e8f0; border-radius: 16px; margin: 20px 0; color: var(--primary); font-weight: bold;
        }

        /* çµæœé  */
        .result-box { text-align: center; background: white; padding: 40px; border-radius: 24px; margin-bottom: 30px; }
        .final-score { font-size: 5rem; font-weight: 800; color: var(--primary); line-height: 1; }
        .mistake-card {
            background: white; padding: 15px; border-radius: 12px; border-left: 5px solid var(--error);
            box-shadow: 0 2px 5px rgba(0,0,0,0.05); margin-bottom: 10px; text-align: left;
        }

        /* åŸå­èˆ‡åŒ–å­¸éµ SVG */
        .atom-c { fill: #333; font-weight:bold; font-family: Arial; font-size: 24px; text-anchor: middle; dominant-baseline: middle;}
        .atom-o { fill: #ef4444; font-weight:bold; font-family: Arial; font-size: 24px; text-anchor: middle; dominant-baseline: middle;}
        .atom-n { fill: #3b82f6; font-weight:bold; font-family: Arial; font-size: 24px; text-anchor: middle; dominant-baseline: middle;}
        .atom-h { fill: #666; font-weight:normal; font-family: Arial; font-size: 18px; text-anchor: middle; dominant-baseline: middle;}
        .bond { stroke: #333; stroke-width: 3; stroke-linecap: round; }
    </style>
</head>
<body>

<div class="container">
    <header>
        <a href="../index.html" class="back-btn">â† ç¸½éƒ¨</a>
        <h1>åŒ–å­¸ç‰¹è¨“åŸºåœ°</h1>
    </header>

    <div class="tab-container">
        <button class="tab-btn active" onclick="switchView('note')">ğŸ“– ç­†è¨˜æ¨¡å¼</button>
        <button class="tab-btn" onclick="switchView('quiz')">ğŸ“ æ¸¬é©—å°ˆå€</button>
    </div>

    <!-- [View 1] ç­†è¨˜æ¨¡å¼ -->
    <div id="view-note" class="view-section active">
        <div class="note-card">
            <h2>ä¸€ã€æœ‰æ©Ÿå®˜èƒ½åŸºç¸½è¡¨</h2>
            <div class="table-wrapper">
                <table>
                    <thead><tr><th>å®¶æ—</th><th>å®˜èƒ½åŸº</th><th>é€šå¼</th><th>ä»£è¡¨ç‰©</th><th>è¨˜æ†¶é»</th></tr></thead>
                    <tbody>
                        <tr><td>é†‡é¡</td><td>-OH</td><td>R-OH</td><td>ä¹™é†‡</td><td>æ˜“æº¶æ–¼æ°´ã€ä¸­æ€§ã€‚</td></tr>
                        <tr><td>é†šé¡</td><td>-O-</td><td>R-O-R'</td><td>äºŒç”²é†š</td><td>é†‡çš„ç•°æ§‹ç‰©ã€‚</td></tr>
                        <tr><td>é†›é¡</td><td>-CHO</td><td>R-CHO</td><td>ç”²é†›</td><td><span class="highlight">æœ‰é‚„åŸåŠ›</span>ã€‚</td></tr>
                        <tr><td>é…®é¡</td><td>-CO-</td><td>R-CO-R'</td><td>ä¸™é…®</td><td>ç„¡é‚„åŸåŠ›ï¼Œæº¶åŠ‘ã€‚</td></tr>
                        <tr><td>ç¾§é…¸</td><td>-COOH</td><td>R-COOH</td><td>ä¹™é…¸</td><td><span class="highlight">å¼±é…¸æ€§</span>ã€‚</td></tr>
                        <tr><td>é…¯é¡</td><td>-COO-</td><td>R-COO-R'</td><td>ä¹™é…¸ä¹™é…¯</td><td>æœ‰æœé¦™ï¼Œé›£æº¶ã€‚</td></tr>
                    </tbody>
                </table>
            </div>
        </div>
        <div class="note-card">
            <h2>äºŒã€ç”Ÿæ´»åŒ–å­¸</h2>
            <div class="table-wrapper">
                <table>
                    <thead><tr><th>åˆ†é¡</th><th>åç¨±</th><th>ç‰¹å¾µ</th></tr></thead>
                    <tbody>
                        <tr><td>é†«è—¥</td><td>é˜¿æ–¯åŒ¹éˆ</td><td>ä¹™é†¯æ°´æ¥Šé…¸ï¼Œé…¸æ€§ã€‚</td></tr>
                        <tr><td>æ¸…æ½”</td><td>è‚¥çš‚</td><td>è„‚è‚ªé…¸éˆ‰ï¼Œ<span class="highlight">æ€•ç¡¬æ°´</span>ã€‚</td></tr>
                        <tr><td>èšåˆç‰©</td><td>PET</td><td>é…¯åŸºï¼Œç¸®åˆèšåˆã€‚</td></tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- [View 2] æ¸¬é©—æ¨¡å¼ -->
    <div id="view-quiz" class="view-section">
        <div id="quiz-menu">
            <div class="stats-panel">
                <div>å·²é¸ <span id="selected-count">0</span> å–®å…ƒ</div>
                <div>å…± <span id="total-selected-items">0</span> é¡Œ</div>
            </div>
            <div class="chapter-grid" id="chapter-list"></div>
            <div class="bottom-dock">
                <button class="start-btn" id="btn-start-quiz" onclick="prepareQuiz()" disabled>ğŸ“ è¨­å®šé¡Œæ•¸ä¸¦é–‹å§‹</button>
            </div>
        </div>

        <div id="quiz-play" style="display:none;">
            <div class="quiz-status">
                <span>é¡Œç›® <span id="q-curr">1</span> / <span id="q-total">10</span></span>
                <span>åˆ†æ•¸: <span id="score">0</span></span>
            </div>
            <div class="progress-bar"><div class="progress-fill" id="progress-fill"></div></div>
            <div id="question-area"></div>
            <div id="answer-area"></div>
            <div id="feedback" class="feedback-box">
                <div id="feedback-text"></div>
                <button class="start-btn" style="margin-top:15px; width:100%" onclick="nextQuestion()">ä¸‹ä¸€é¡Œ â”</button>
            </div>
            <div style="text-align:center; margin-top:30px;">
                <button style="background:none; border:none; color:var(--gray); font-weight:bold; cursor:pointer;" onclick="switchView('quiz')">é€€å‡ºæ¸¬é©—</button>
            </div>
        </div>

        <div id="quiz-result" style="display:none;">
            <div class="result-box">
                <div class="final-score" id="final-score">100</div>
                <div style="color:var(--gray)">æ¸¬é©—å¾—åˆ†</div>
            </div>
            <button class="start-btn" onclick="retryQuiz()" style="margin-bottom:15px;">å†æ¸¬ä¸€æ¬¡</button>
            <button class="start-btn" style="background:#f1f5f9; color:var(--text);" onclick="switchView('quiz')">å›é¸å–®</button>
            <div id="mistake-section" style="display:none; margin-top:30px;">
                <h3 style="color:var(--error); text-align:center; margin-bottom:15px;">âš ï¸ éœ€åŠ å¼·çš„è§€å¿µ</h3>
                <div id="mistake-list"></div>
            </div>
        </div>
    </div>

    <!-- é¡Œæ•¸å½ˆçª— -->
    <div id="quiz-settings-modal" class="modal-overlay">
        <div class="modal">
            <h3>è¨­å®šæ¸¬é©—é¡Œæ•¸</h3>
            <p>ç¯„åœç¸½é¡Œæ•¸ï¼š<span id="modal-total-items">0</span></p>
            <input type="number" id="quiz-num-input" class="num-input" value="10" min="5">
            <div class="modal-btns">
                <button class="start-btn" style="background:#f1f5f9; color:var(--text);" onclick="closeModal()">å–æ¶ˆ</button>
                <button class="start-btn" onclick="confirmStartQuiz()">é–‹å§‹</button>
            </div>
        </div>
    </div>
</div>

<script>
    // ================= 1. å®Œæ•´è³‡æ–™åº« (130+ é¡Œ) =================
    
    const chemData = {
        "åŸºç¤å®˜èƒ½åŸº (50é¡Œ)": [
            // åœ–å½¢é¸æ“‡
            { type: 'image_choice', svg: `<svg viewBox="0 0 100 60"><line x1="10" y1="30" x2="40" y2="30" class="bond"/><text x="60" y="30" class="atom-o">O</text><text x="85" y="30" class="atom-h">H</text></svg>`, q: "é€™å€‹ã€Œ-OHã€çµæ§‹å±¬æ–¼ä»€éº¼å®˜èƒ½åŸºï¼Ÿ", a: "ç¾¥åŸº", ans: "ç¾¥åŸº", o: ["ç¾§åŸº", "ç¾¥åŸº", "é†›åŸº", "ç¾°åŸº"], exp: "-OH æ˜¯ç¾¥åŸºã€‚é†‡é¡å’Œé…šé¡éƒ½æœ‰å®ƒã€‚" },
            { type: 'image_choice', svg: `<svg viewBox="0 0 120 80"><line x1="10" y1="40" x2="40" y2="40" class="bond"/><text x="55" y="40" class="atom-c">C</text><line x1="65" y1="25" x2="80" y2="10" class="bond"/><text x="90" y="10" class="atom-o">O</text><line x1="70" y1="30" x2="85" y2="15" class="bond"/><line x1="65" y1="50" x2="80" y2="65" class="bond"/><text x="90" y="70" class="atom-h">H</text></svg>`, q: "ã€Œ-CHOã€æ˜¯å“ªç¨®å®˜èƒ½åŸºï¼Ÿ", a: "é†›åŸº", ans: "é†›åŸº", o: ["é…®åŸº", "ç¾§åŸº", "é†›åŸº", "é…¯åŸº"], exp: "é†›åŸºç‰¹å¾µæ˜¯ C=O é›™éµæœ«ç«¯æ¥ä¸€å€‹ Hã€‚" },
            { type: 'image_choice', svg: `<svg viewBox="0 0 120 80"><text x="20" y="40" class="atom-c">C</text><line x1="30" y1="40" x2="60" y2="40" class="bond"/><text x="75" y="40" class="atom-o">O</text><line x1="90" y1="40" x2="110" y2="40" class="bond"/><text x="120" y="40" class="atom-c">C</text></svg>`, q: "ç¢³èˆ‡ç¢³ä¸­é–“å¤¾ä¸€å€‹æ°§ã€ŒC-O-Cã€ï¼Œé€™æ˜¯ï¼Ÿ", a: "é†šé¡", ans: "é†šé¡", o: ["é…¯é¡", "é…®é¡", "é†šé¡", "é†‡é¡"], exp: "é†šé¡çµæ§‹è¼ƒç©©å®šï¼Œå¦‚ç”²é†šã€‚" },
            { type: 'image_choice', svg: `<svg viewBox="0 0 140 80"><text x="20" y="40" class="atom-c">C</text><line x1="30" y1="25" x2="45" y2="10" class="bond"/><text x="55" y="10" class="atom-o">O</text><line x1="35" y1="30" x2="50" y2="15" class="bond"/><line x1="30" y1="50" x2="50" y2="50" class="bond"/><text x="65" y="50" class="atom-n">N</text><text x="85" y="50" class="atom-h">H</text><line x1="95" y1="50" x2="115" y2="50" class="bond"/></svg>`, q: "ã€Œ-CONH-ã€çµæ§‹åœ¨è›‹ç™½è³ªä¸­è¢«ç¨±ç‚ºï¼Ÿ", a: "è‚½éµ", ans: "è‚½éµ", o: ["æ°«éµ", "é›¢å­éµ", "è‚½éµ", "é…¯éµ"], exp: "é€™æ˜¯é†¯èƒºåŸº (è‚½éµ)ï¼Œé€£æ¥èƒºåŸºé…¸å½¢æˆè›‹ç™½è³ªã€‚" },
            { type: 'image_choice', svg: `<svg viewBox="0 0 100 100"><polygon points="50,10 85,30 85,70 50,90 15,70 15,30" fill="none" stroke="#333" stroke-width="3"/><circle cx="50" cy="50" r="20" fill="none" stroke="#333" stroke-width="2"/></svg>`, q: "å…­è§’å½¢å…§æœ‰åœ“åœˆçš„çµæ§‹æ˜¯ï¼Ÿ", a: "è‹¯ç’°", ans: "è‹¯ç’°", o: ["ç’°å·±çƒ·", "è‹¯ç’°", "è˜", "é…š"], exp: "è‹¯ç’°çµæ§‹éå¸¸ç©©å®šã€‚" },
            // å¡«ç©º
            { type: 'fill', pre: "çƒ·çƒ´çš„é€šå¼ç‚º", post: "ï¼Œå±¬æ–¼é£½å’Œçƒ´ã€‚", a: "CnH2n+2", ans: "CnH2n+2", opts: ["CnH2n", "CnH2n-2", "CnHn"], exp: "é£½å’Œéˆç‹€çƒ´ã€‚" },
            { type: 'fill', pre: "çƒ¯çƒ´å«æœ‰ç¢³ç¢³", post: "éµï¼Œå±¬æ–¼ä¸é£½å’Œçƒ´ã€‚", a: "é›™", ans: "é›™", opts: ["å–®", "åƒ", "é›¢å­"], exp: "çƒ¯çƒ´å« C=Cã€‚" },
            { type: 'fill', pre: "ç‚”çƒ´å«æœ‰ç¢³ç¢³", post: "éµã€‚", a: "åƒ", ans: "åƒ", opts: ["é›™", "å–®", "æ°«"], exp: "ç‚”çƒ´å« Câ‰¡Cã€‚" },
            { type: 'fill', pre: "è‹¯ ($C_6H_6$) åˆ†å­ä¸­çš„ç¢³ç¢³éµçµé•·åº¦ä»‹æ–¼", post: "ä¹‹é–“ã€‚", a: "å–®éµèˆ‡é›™éµ", ans: "å–®éµèˆ‡é›™éµ", opts: ["é›™éµèˆ‡åƒéµ", "å–®éµèˆ‡æ°«éµ"], exp: "å…·å…±æŒ¯çµæ§‹ã€‚" },
            { type: 'fill', pre: "ç’°å·±çƒ· ($C_6H_{12}$) èˆ‡", post: "äº’ç‚ºåŒåˆ†ç•°æ§‹ç‰©ã€‚", a: "2-å·±çƒ¯", ans: "2-å·±çƒ¯", opts: ["è‹¯", "æ­£å·±çƒ·", "å·±ç‚”"], exp: "ç’°çƒ·é€šå¼èˆ‡çƒ¯ç›¸åŒã€‚" },
            { type: 'fill', pre: "ä¸€ç´šé†‡çš„çµæ§‹ç‰¹å¾µæ˜¯é€£æ¥ç¾¥åŸºçš„ç¢³ä¸Šï¼Œé‚„æ¥äº†", post: "å€‹æ°«åŸå­ã€‚", a: "2", ans: "2", opts: ["1", "0", "3"], exp: "R-CH2-OHã€‚" },
            { type: 'fill', pre: "é†‡é¡å› åˆ†å­é–“å…·æœ‰", post: "ï¼Œæ•…æ²¸é»æ¯”åŒåˆ†å­é‡çš„çƒ·é¡é«˜ã€‚", a: "æ°«éµ", ans: "æ°«éµ", opts: ["é›¢å­éµ", "é›™ç¡«éµ", "é‡‘å±¬éµ"], exp: "-OH ä¸Šçš„æ°«å¯å½¢æˆæ°«éµã€‚" },
            { type: 'fill', pre: "é†šé¡çš„é€šå¼ç‚º R-O-R'ï¼Œå…¶çµæ§‹èˆ‡", post: "åˆ†å­ç›¸ä¼¼ã€‚", a: "æ°´", ans: "æ°´", opts: ["æ°¨", "ç”²çƒ·", "äºŒæ°§åŒ–ç¢³"], exp: "å‘ˆè§’å½¢çµæ§‹ã€‚" },
            { type: 'fill', pre: "é†›åŸº (-CHO) å¿…å®šä½æ–¼ç¢³éˆçš„", post: "ã€‚", a: "æœ«ç«¯", ans: "æœ«ç«¯", opts: ["ä¸­é–“", "æ”¯éˆ", "ç’°å…§"], exp: "ç¢³å¿…é ˆæ¥ä¸€å€‹æ°«ã€‚" },
            { type: 'fill', pre: "é…®åŸº (C=O) å¿…å®šä½æ–¼ç¢³éˆçš„", post: "ã€‚", a: "ä¸­é–“", ans: "ä¸­é–“", opts: ["æœ«ç«¯", "æ”¯éˆ", "å¤–éƒ¨"], exp: "å…©é‚Šå¿…é ˆæ¥ç¢³ã€‚" },
            { type: 'fill', pre: "ç¾§é…¸åˆ†å­é–“å¯å½¢æˆ", post: "ï¼Œæ•…æ²¸é»æ¥µé«˜ã€‚", a: "äºŒèšé«”", ans: "äºŒèšé«”", opts: ["é›¢å­éµ", "ç¶²ç‹€çµæ§‹", "é‡‘å±¬éµ"], exp: "å½¢æˆé›™é‡æ°«éµã€‚" },
            { type: 'fill', pre: "ç”²é…¸ä¿—ç¨±", post: "ï¼Œæ˜¯èèŸ»å®å’¬åˆ†æ³Œçš„ç‰©è³ªã€‚", a: "èŸ»é…¸", ans: "èŸ»é…¸", opts: ["é†‹é…¸", "è‰é…¸", "ä¹³é…¸"], exp: "å«æœ‰é†›åŸºçµæ§‹ã€‚" },
            { type: 'fill', pre: "ä¹™äºŒé…¸ä¿—ç¨±", post: "ï¼Œå¸¸ä½œç‚ºé‚„åŸåŠ‘ã€‚", a: "è‰é…¸", ans: "è‰é…¸", opts: ["èŸ»é…¸", "é†‹é…¸", "æ°´æ¥Šé…¸"], exp: "ç”±å…©å€‹ç¾§åŸºç›¸é€£ã€‚" },
            { type: 'fill', pre: "ä½ç´šé…¯é¡é€šå¸¸å…·æœ‰", post: "å‘³ï¼Œå¸¸ç”¨æ–¼é¦™æ–™å·¥æ¥­ã€‚", a: "æ°´æœé¦™", ans: "æ°´æœé¦™", opts: ["è…è‡­", "åˆºé¼»", "é­šè…¥"], exp: "å¦‚ä¹™é…¸ç•°æˆŠé…¯æœ‰é¦™è•‰å‘³ã€‚" },
            { type: 'fill', pre: "æ²¹è„‚åœ¨åŒ–å­¸çµæ§‹ä¸Šå±¬æ–¼", post: "é¡ã€‚", a: "é…¯", ans: "é…¯", opts: ["é…¸", "é†‡", "é†š"], exp: "æ²¹è„‚æ˜¯ä¸‰é…¸ç”˜æ²¹é…¯ã€‚" },
            { type: 'fill', pre: "èƒºé¡æ˜¯æ°¨çš„è¡ç”Ÿç‰©ï¼Œæ°´æº¶æ¶²å‘ˆå¼±", post: "æ€§ã€‚", a: "é¹¼", ans: "é¹¼", opts: ["é…¸", "ä¸­", "å…©"], exp: "å­¤å°é›»å­å¯æ¥å—è³ªå­ã€‚" },
            { type: 'fill', pre: "é†¯èƒºåŸº (-CONH-) å‘ˆ", post: "æ€§ã€‚", a: "ä¸­", ans: "ä¸­", opts: ["é…¸", "é¹¼", "å…©"], exp: "ä¸èˆ‡é…¸é¹¼åæ‡‰ã€‚" },
            { type: 'fill', pre: "å°¿ç´ å«æœ‰", post: "å€‹é†¯èƒºåŸºçµæ§‹ã€‚", a: "2", ans: "2", opts: ["1", "3", "0"], exp: "(NH2)2COã€‚" },
            { type: 'fill', pre: "çœ‹åˆ°ã€Œæœ‰æ°´æœé¦™å‘³ã€ï¼Œè¦é¦¬ä¸Šè¯æƒ³åˆ°", post: "ã€‚", a: "é…¯é¡", ans: "é…¯é¡", opts: ["é†šé¡", "é…®é¡", "é†›é¡"], exp: "ç‰¹å¾µæ€§è³ªã€‚" },
            { type: 'fill', pre: "çœ‹åˆ°ã€Œæœ‰é­šè…¥å‘³ã€ï¼Œè¦é¦¬ä¸Šè¯æƒ³åˆ°", post: "ã€‚", a: "èƒºé¡", ans: "èƒºé¡", opts: ["é†¯èƒº", "é…¸é¡", "é†‡é¡"], exp: "ä½ç´šèƒºçš„ç‰¹å¾µã€‚" },
            { type: 'fill', pre: "çœ‹åˆ°ã€Œå†¬å¤©æœƒçµå†°çš„é…¸ã€ï¼Œè¦é¦¬ä¸Šè¯æƒ³åˆ°", post: "ã€‚", a: "ä¹™é…¸", ans: "ä¹™é…¸", opts: ["ç”²é…¸", "è‰é…¸", "é¹½é…¸"], exp: "å†°é†‹é…¸ã€‚" },
            { type: 'fill', pre: "çœ‹åˆ°ã€Œå»å…‰æ°´ã€ï¼Œè¦é¦¬ä¸Šè¯æƒ³åˆ°", post: "ã€‚", a: "ä¸™é…®", ans: "ä¸™é…®", opts: ["ä¹™é…¸ä¹™é…¯", "ä¹™é†š", "ç”²é†‡"], exp: "å¸¸ç”¨æœ‰æ©Ÿæº¶åŠ‘ã€‚" },
            { type: 'fill', pre: "çœ‹åˆ°ã€Œç¦é¦¬æ—ã€ï¼Œè¦é¦¬ä¸Šè¯æƒ³åˆ°", post: "ã€‚", a: "ç”²é†›æ°´æº¶æ¶²", ans: "ç”²é†›æ°´æº¶æ¶²", opts: ["ç”²é†‡", "ç”²é…¸", "ä¹™é†›"], exp: "é˜²è…ç”¨ã€‚" },
            { type: 'fill', pre: "çœ‹åˆ°ã€Œé›»çŸ³æ°£ã€ï¼Œè¦é¦¬ä¸Šè¯æƒ³åˆ°", post: "ã€‚", a: "ä¹™ç‚”", ans: "ä¹™ç‚”", opts: ["ä¹™çƒ¯", "ç”²çƒ·", "ä¸™çƒ·"], exp: "ç¢³åŒ–éˆ£åŠ æ°´ç”Ÿæˆã€‚" },
            // æ–‡å­—é¸æ“‡
            { type: 'text_choice', q: "ä¸‹åˆ—ä½•è€…å±¬æ–¼ä¸‰ç´šé†‡ï¼Ÿ", a: "2-ç”²åŸº-2-ä¸™é†‡", ans: "2-ç”²åŸº-2-ä¸™é†‡", o: ["1-ä¸é†‡", "2-ä¸é†‡", "ä¹™é†‡"], exp: "ä¸­å¿ƒç¢³æ²’æœ‰æ¥æ°«ã€‚" },
            { type: 'text_choice', q: "ä¹™é†šæ›¾è¢«ç”¨ä½œä»€éº¼é†«ç™‚ç”¨é€”ï¼Ÿ", a: "éº»é†‰åŠ‘", ans: "éº»é†‰åŠ‘", o: ["é˜²è…åŠ‘", "æŠ—ç”Ÿç´ ", "æ­¢ç—›è—¥"], exp: "å¸å…¥æ€§éº»é†‰åŠ‘ã€‚" },
            { type: 'text_choice', q: "ä¸‹åˆ—ä½•è€…é›£æº¶æ–¼æ°´ï¼Ÿ", a: "ä¹™é…¸ä¹™é…¯", ans: "ä¹™é…¸ä¹™é…¯", o: ["ä¹™é…¸", "ä¹™é†‡", "ä¸™é…®"], exp: "é…¯é¡æ˜¯éæ¥µæ€§ç«¯è¼ƒå¤§çš„åˆ†å­ã€‚" },
            { type: 'text_choice', q: "ä¸‹åˆ—ä½•è€…å¯èˆ‡é‡‘å±¬éˆ‰åæ‡‰ç”¢ç”Ÿæ°«æ°£ï¼Ÿ", a: "ä¹™é†‡", ans: "ä¹™é†‡", o: ["ä¹™é†š", "ä¹™çƒ·", "è‹¯"], exp: "é†‡å«æœ‰æ´»æ½‘æ°«ã€‚" },
            { type: 'text_choice', q: "ä¸‹åˆ—ä½•è€…äº’ç‚ºå®˜èƒ½åŸºç•°æ§‹ç‰©ï¼Ÿ", a: "ä¹™é†‡èˆ‡ç”²é†š", ans: "ä¹™é†‡èˆ‡ç”²é†š", o: ["ä¹™é…¸èˆ‡ä¹™é†›", "ä¸™é…®èˆ‡ä¸™é†›", "ä¹™çƒ·èˆ‡ä¹™çƒ¯"], exp: "é€šå¼çš†ç‚º CnH2n+2Oã€‚" },
            { type: 'text_choice', q: "è‹¯ç’°ä¸Šçš„ç¢³åŸå­æ··æˆè»ŒåŸŸç‚ºï¼Ÿ", a: "sp2", ans: "sp2", o: ["sp", "sp3", "dsp2"], exp: "å¹³é¢æ­£å…­é‚Šå½¢ã€‚" },
            { type: 'text_choice', q: "ä¸‹åˆ—ä½•è€…ç‚ºèŠ³é¦™çƒ´ï¼Ÿ", a: "ç”²è‹¯", ans: "ç”²è‹¯", o: ["ç’°å·±çƒ·", "å·±çƒ¯", "ä¹™ç‚”"], exp: "å«æœ‰è‹¯ç’°ã€‚" },
            { type: 'text_choice', q: "åŒç¢³æ•¸çƒ·çƒ´ä¸­ï¼Œæ”¯éˆè¶Šå¤šï¼Œæ²¸é»è¶Šï¼Ÿ", a: "ä½", ans: "ä½", o: ["é«˜", "ä¸è®Š", "ç„¡é—œ"], exp: "æ¥è§¸é¢ç©è®Šå°ã€‚" },
            { type: 'text_choice', q: "ä¸‹åˆ—ä½•è€…å…·å‚™å…‰å­¸ç•°æ§‹ç‰©(æ‰‹æ€§ç¢³)ï¼Ÿ", a: "2-ä¸é†‡", ans: "2-ä¸é†‡", o: ["1-ä¸é†‡", "ä¹™é†‡", "ä¸™é†‡"], exp: "2è™Ÿç¢³æ¥äº†å››å€‹ä¸åŒåŸºåœ˜ã€‚" },
            { type: 'text_choice', q: "é„°è‹¯äºŒç”²é…¸åˆç¨±ç‚ºï¼Ÿ", a: "è‹¯äºŒç”²é…¸", ans: "è‹¯äºŒç”²é…¸", o: ["æ°´æ¥Šé…¸", "è‹¯ç”²é…¸", "è‹¦å‘³é…¸"], exp: "å…©å€‹ç¾§åŸºç›¸é„°ã€‚" },
            { type: 'text_choice', q: "ä¸‹åˆ—ä½•è€…å¯å½¢æˆåˆ†å­å…§æ°«éµï¼Ÿ", a: "é„°-ç¡åŸºè‹¯é…š", ans: "é„°-ç¡åŸºè‹¯é…š", o: ["å°-ç¡åŸºè‹¯é…š", "è‹¯é…š", "ç”²é†‡"], exp: "é„°ä½å®˜èƒ½åŸºè·é›¢è¿‘ã€‚" }
        ],

        "ç”Ÿæ´»èˆ‡ç’°å¢ƒ (50é¡Œ)": [
            { type: 'fill', pre: "é˜¿æ–¯åŒ¹éˆæ˜¯ç”±æ°´æ¥Šé…¸èˆ‡", post: "åæ‡‰è£½æˆã€‚", a: "ä¹™é…", ans: "ä¹™é…", opts: ["ä¹™é†‡", "ä¹™é…¸", "ç”²é†‡"], exp: "ä¹™é†¯æ°´æ¥Šé…¸ã€‚" },
            { type: 'fill', pre: "è‚¥çš‚åœ¨ç¡¬æ°´ä¸­ç”¢ç”Ÿ", post: "ï¼Œå½±éŸ¿æ´—æ»Œã€‚", a: "çš‚å¢", ans: "çš‚å¢", opts: ["æ³¡æ²«", "ç”˜æ²¹", "é…¸æ€§ç‰©è³ª"], exp: "è„‚è‚ªé…¸éˆ£é‚æ²‰æ¾±ã€‚" },
            { type: 'fill', pre: "è€ç¶¸ (Nylon) çµæ§‹ä¸­å«æœ‰", post: "å…ƒç´ ã€‚", a: "æ°®", ans: "æ°®", opts: ["æ°¯", "ç¡«", "ç£·"], exp: "èšé†¯èƒºçµæ§‹ã€‚" },
            { type: 'fill', pre: "æ±½æ²¹çš„è¾›çƒ·å€¼ä»£è¡¨", post: "èƒ½åŠ›ã€‚", a: "æŠ—éœ‡çˆ†", ans: "æŠ—éœ‡çˆ†", opts: ["ç‡ƒç‡’", "æ½¤æ»‘", "æ®ç™¼"], exp: "ç•°è¾›çƒ·å®šç‚º100ã€‚" },
            { type: 'fill', pre: "é€ æˆè‡­æ°§å±¤ç ´æ´çš„ä¸»å› æ˜¯", post: "ã€‚", a: "æ°Ÿæ°¯ç¢³åŒ–ç‰©", ans: "æ°Ÿæ°¯ç¢³åŒ–ç‰©", opts: ["ç”²çƒ·", "äºŒæ°§åŒ–ç¢³", "æ°®æ°§åŒ–ç‰©"], exp: "CFCs åˆ†è§£å‡ºæ°¯åŸå­ã€‚" },
            { type: 'fill', pre: "ç”Ÿè³ªæŸ´æ²¹çš„ä¸»è¦æˆåˆ†æ˜¯", post: "ã€‚", a: "è„‚è‚ªé…¸ç”²é…¯", ans: "è„‚è‚ªé…¸ç”²é…¯", opts: ["çƒ·é¡", "é†‡é¡", "é†šé¡"], exp: "è½‰é…¯åŒ–åæ‡‰ã€‚" },
            { type: 'fill', pre: "ä¸æ²¾é‹å¡—å±¤éµæ°Ÿé¾çš„å–®é«”æ˜¯", post: "ã€‚", a: "å››æ°Ÿä¹™çƒ¯", ans: "å››æ°Ÿä¹™çƒ¯", opts: ["ä¹™çƒ¯", "æ°¯ä¹™çƒ¯", "è‹¯ä¹™çƒ¯"], exp: "èšå››æ°Ÿä¹™çƒ¯ã€‚" },
            { type: 'fill', pre: "æª¢é©—æ¾±ç²‰ä½¿ç”¨", post: "ï¼Œå‘ˆè—é»‘è‰²ã€‚", a: "ç¢˜æ¶²", ans: "ç¢˜æ¶²", opts: ["æ–æ—", "æœ¬æ°æ¶²", "æº´æ°´"], exp: "ç¢˜åµŒå…¥èºæ—‹çµæ§‹ã€‚" },
            { type: 'fill', pre: "èƒƒè—¥æˆåˆ†å¸¸ç”¨æ–¼ä¸­å’Œèƒƒé…¸çš„æ˜¯", post: "ã€‚", a: "æ°«æ°§åŒ–é‹", ans: "æ°«æ°§åŒ–é‹", opts: ["é¹½é…¸", "ç¡«é…¸", "é…’ç²¾"], exp: "å¼±é¹¼æ€§ã€‚" },
            { type: 'fill', pre: "é€ æˆã€Œé…¸é›¨ã€çš„ä¸»è¦æ°£é«”æ˜¯ç¡«æ°§åŒ–ç‰©èˆ‡", post: "ã€‚", a: "æ°®æ°§åŒ–ç‰©", ans: "æ°®æ°§åŒ–ç‰©", opts: ["äºŒæ°§åŒ–ç¢³", "ç”²çƒ·", "è‡­æ°§"], exp: "å½¢æˆç¡«é…¸èˆ‡ç¡é…¸ã€‚" },
            { type: 'fill', pre: "æº«å®¤æ•ˆæ‡‰ä¸»è¦äººç‚ºæ°£é«”æ˜¯", post: "ã€‚", a: "äºŒæ°§åŒ–ç¢³", ans: "äºŒæ°§åŒ–ç¢³", opts: ["æ°§æ°£", "æ°®æ°£", "æ°«æ°£"], exp: "åŒ–çŸ³ç‡ƒæ–™ç‡ƒç‡’ã€‚" },
            { type: 'fill', pre: "è‡ªä¾†æ°´å» é€šå¸¸ä½¿ç”¨", post: "æ°£é«”ä¾†é€²è¡Œæ¶ˆæ¯’æ®ºèŒã€‚", a: "æ°¯æ°£", ans: "æ°¯æ°£", opts: ["æ°«æ°£", "æ°®æ°£", "æ°¦æ°£"], exp: "ç”Ÿæˆæ¬¡æ°¯é…¸ã€‚" },
            { type: 'fill', pre: "å¸‚å”®ã€Œå‘³ç²¾ã€åŒ–å­¸æˆåˆ†æ˜¯", post: "ã€‚", a: "éº©èƒºé…¸éˆ‰", ans: "éº©èƒºé…¸éˆ‰", opts: ["æ°¯åŒ–éˆ‰", "ç¢³é…¸éˆ‰", "è‹¯ç”²é…¸éˆ‰"], exp: "èƒºåŸºé…¸é¹½é¡ã€‚" },
            { type: 'fill', pre: "èŒ¶èˆ‡å’–å•¡ä¸­æç¥æˆåˆ†æ˜¯", post: "ã€‚", a: "å’–å•¡å› ", ans: "å’–å•¡å› ", opts: ["å°¼å¤ä¸", "å—å•¡", "é˜¿æ–¯åŒ¹éˆ"], exp: "ç”Ÿç‰©é¹¼ã€‚" },
            { type: 'fill', pre: "æ°´ä¿ç—…æ˜¯å› ç‚ºå“ªç¨®é‡é‡‘å±¬æ±™æŸ“ï¼Ÿ", a: "æ±", ans: "æ±", opts: ["é˜", "é‰›", "ç ·"], exp: "ç”²åŸºæ±ä¸­æ¯’ã€‚" },
            { type: 'fill', pre: "ç—›ç—›ç—…æ˜¯å› ç‚ºå“ªç¨®é‡é‡‘å±¬æ±™æŸ“ï¼Ÿ", a: "é˜", ans: "é˜", opts: ["æ±", "éŠ…", "é‰»"], exp: "é˜é€ æˆéª¨éª¼ç—…è®Šã€‚" },
            { type: 'fill', pre: "PM2.5 æ˜¯æŒ‡ç²’å¾‘å°æ–¼", post: "çš„æ‡¸æµ®å¾®ç²’ã€‚", a: "2.5 å¾®ç±³", ans: "2.5 å¾®ç±³", opts: ["2.5 å¥ˆç±³", "2.5 æ¯«ç±³", "2.5 å…¬åˆ†"], exp: "å¯ç©¿é€è‚ºæ³¡ã€‚" },
            { type: 'fill', pre: "è¶…è‡¨ç•Œæµé«”äºŒæ°§åŒ–ç¢³å¸¸ç”¨æ–¼èƒå–", post: "ã€‚", a: "å’–å•¡å› ", ans: "å’–å•¡å› ", opts: ["è›‹ç™½è³ª", "æ¾±ç²‰", "çº–ç¶­ç´ "], exp: "ä½å’–å•¡å› è£½é€ ã€‚" },
            { type: 'fill', pre: "å¥ˆç±³ææ–™æ˜¯æŒ‡é¡†ç²’å¤§å°åœ¨", post: "ç¯„åœå…§ã€‚", a: "1~100 nm", ans: "1~100 nm", opts: ["1~100 um", "1~100 mm"], exp: "å¥ˆç±³å°ºåº¦ã€‚" },
            { type: 'fill', pre: "è“®è‘‰æ•ˆæ‡‰æ˜¯å› ç‚ºè‘‰é¢å…·æœ‰", post: "çµæ§‹ã€‚", a: "å¥ˆç±³å‡¸èµ·", ans: "å¥ˆç±³å‡¸èµ·", opts: ["è¦ªæ°´æ€§", "å¹³æ»‘", "å¸¶é›»"], exp: "è¶…ç–æ°´æ€§ã€‚" },
            { type: 'fill', pre: "çœ‹åˆ°ã€Œé˜¿æ–¯åŒ¹éˆã€ï¼Œè¦é¦¬ä¸Šè¯æƒ³åˆ°å®ƒå…·æœ‰", post: "çµæ§‹ã€‚", a: "ç¾§åŸºèˆ‡é…¯åŸº", ans: "ç¾§åŸºèˆ‡é…¯åŸº", opts: ["èƒºåŸºèˆ‡é…®åŸº", "é†›åŸºèˆ‡é†šåŸº"], exp: "ä¹™é†¯æ°´æ¥Šé…¸ã€‚" },
            { type: 'fill', pre: "çœ‹åˆ°ã€Œæ²¹è„‚ã€ï¼Œè¦é¦¬ä¸Šè¯æƒ³åˆ°å®ƒæ˜¯", post: "ã€‚", a: "é…¯é¡", ans: "é…¯é¡", opts: ["é…¸é¡", "é†‡é¡", "çƒ´é¡"], exp: "ä¸‰é…¸ç”˜æ²¹é…¯ã€‚" },
            { type: 'fill', pre: "çœ‹åˆ°ã€Œé…¶ã€ï¼Œè¦é¦¬ä¸Šè¯æƒ³åˆ°å®ƒçš„æˆåˆ†é€šå¸¸æ˜¯", post: "ã€‚", a: "è›‹ç™½è³ª", ans: "è›‹ç™½è³ª", opts: ["é†£é¡", "è„‚è³ª", "ç¶­ç”Ÿç´ "], exp: "ç”Ÿç‰©å‚¬åŒ–åŠ‘ã€‚" },
            { type: 'fill', pre: "çœ‹åˆ°ã€Œçº–ç¶­ç´ ã€ï¼Œè¦é¦¬ä¸Šè¯æƒ³åˆ°å®ƒæ˜¯", post: "çš„èšåˆç‰©ã€‚", a: "è‘¡è„ç³–", ans: "è‘¡è„ç³–", opts: ["æœç³–", "èƒºåŸºé…¸", "æ ¸è‹·é…¸"], exp: "beta-è‘¡è„ç³–èšåˆã€‚" },
            
            { type: 'text_choice', q: "ç‡ƒç‡’æœƒç”¢ç”Ÿæˆ´å¥§è¾›çš„å¡‘è† ï¼Ÿ", a: "PVC", ans: "PVC", o: ["PE", "PP", "PET"], exp: "å«æ°¯æˆåˆ†ã€‚" },
            { type: 'text_choice', q: "PM2.5 çš„å–®ä½å¾®ç±³æ˜¯æŒ‡ï¼Ÿ", a: "10çš„è² 6æ¬¡æ–¹å…¬å°º", ans: "10çš„è² 6æ¬¡æ–¹å…¬å°º", o: ["10çš„è² 9æ¬¡æ–¹", "10çš„è² 3æ¬¡æ–¹", "10çš„è² 12æ¬¡æ–¹"], exp: "micro-ã€‚" },
            { type: 'text_choice', q: "èƒƒè—¥ä¸­è‹¥å«æ°«æ°§åŒ–é‹ï¼Œå‰¯ä½œç”¨ç‚ºï¼Ÿ", a: "ä¾¿ç§˜", ans: "ä¾¿ç§˜", o: ["è…¹ç€‰", "è„¹æ°£", "å¤±çœ "], exp: "é‹é¹½ç‰¹æ€§ã€‚" },
            { type: 'text_choice', q: "èƒƒè—¥ä¸­è‹¥å«æ°«æ°§åŒ–é‚ï¼Œå‰¯ä½œç”¨ç‚ºï¼Ÿ", a: "è…¹ç€‰", ans: "è…¹ç€‰", o: ["ä¾¿ç§˜", "è„¹æ°£", "å¤±çœ "], exp: "é‚é¹½ç‰¹æ€§ã€‚" },
            { type: 'text_choice', q: "ä¸‹åˆ—çº–ç¶­ç‡ƒç‡’æœ‰ç‡’ç„¦ç¾½æ¯›å‘³ï¼Ÿ", a: "ç¾Šæ¯›", ans: "ç¾Šæ¯›", o: ["æ£‰èŠ±", "è€ç¶¸", "èšé…¯"], exp: "è›‹ç™½è³ªæˆåˆ†ã€‚" },
            { type: 'text_choice', q: "ä¿éº—é¾ (PS) é‡åˆ°æŸ‘æ©˜æ²¹æœƒï¼Ÿ", a: "æº¶è§£", ans: "æº¶è§£", o: ["è®Šè‰²", "ç‡ƒç‡’", "çˆ†ç‚¸"], exp: "ç›¸ä¼¼ç›¸æº¶ã€‚" },
            { type: 'text_choice', q: "é‰›è“„é›»æ± æ”¾é›»æ™‚ï¼Œé›»è§£æ¶²ç¡«é…¸æ¿ƒåº¦æœƒï¼Ÿ", a: "é™ä½", ans: "é™ä½", o: ["å‡é«˜", "ä¸è®Š", "å…ˆå‡å¾Œé™"], exp: "æ¶ˆè€—ç¡«é…¸ä¸¦ç”Ÿæˆæ°´ã€‚" }
        ],

        "é€²éšæœ‰æ©Ÿåæ‡‰ (50é¡Œ)": [
            { type: 'fill', pre: "ä¸€ç´šé†‡æ°§åŒ–å…ˆç”Ÿæˆ", post: "ï¼Œå†æ°§åŒ–æˆé…¸ã€‚", a: "é†›", ans: "é†›", opts: ["é…®", "é…¯", "é†š"], exp: "è„«æ°«åæ‡‰ã€‚" },
            { type: 'fill', pre: "äºŒç´šé†‡æ°§åŒ–ç”Ÿæˆ", post: "ã€‚", a: "é…®", ans: "é…®", opts: ["é†›", "é…¸", "é†š"], exp: "ç„¡æ³•ç¹¼çºŒæ°§åŒ–ã€‚" },
            { type: 'fill', pre: "å¤šå€«è©¦åŠ‘é‡é†›ç”¢ç”Ÿ", post: "ã€‚", a: "éŠ€é¡", ans: "éŠ€é¡", opts: ["ç´…æ²‰æ¾±", "è—æ²‰æ¾±", "æ°£æ³¡"], exp: "éŠ€é›¢å­é‚„åŸã€‚" },
            { type: 'fill', pre: "ä¹™é†‡åœ¨ 170Â°C æ¿ƒç¡«é…¸ä¸‹è„«æ°´ç”Ÿæˆ", post: "ã€‚", a: "ä¹™çƒ¯", ans: "ä¹™çƒ¯", opts: ["ä¹™é†š", "ä¹™çƒ·", "ä¹™ç‚”"], exp: "åˆ†å­å…§è„«æ°´ã€‚" },
            { type: 'fill', pre: "ç”²è‹¯æ°§åŒ–ç”Ÿæˆ", post: "ã€‚", a: "è‹¯ç”²é…¸", ans: "è‹¯ç”²é…¸", opts: ["è‹¯é…š", "è‹¯ç”²é†›", "è‹¯ä¹™é…¸"], exp: "å´éˆæ°§åŒ–ã€‚" },
            { type: 'fill', pre: "ä¹™ç‚”é«˜æº«ä¸‰èšç”Ÿæˆ", post: "ã€‚", a: "è‹¯", ans: "è‹¯", opts: ["ç’°å·±çƒ·", "å·±çƒ¯", "èšä¹™ç‚”"], exp: "èŠ³é¦™åŒ–åæ‡‰ã€‚" },
            { type: 'fill', pre: "æ°´æ¥Šé…¸èˆ‡ç”²é†‡åæ‡‰ç”Ÿæˆ", post: "ã€‚", a: "æ°´æ¥Šé…¸ç”²é…¯", ans: "æ°´æ¥Šé…¸ç”²é…¯", opts: ["é˜¿æ–¯åŒ¹éˆ", "è‹¯ç”²é…¸", "è‹¯é…š"], exp: "å†¬é’æ²¹ã€‚" },
            { type: 'fill', pre: "é†¯èƒºæ°´è§£æœƒç”¢ç”Ÿ", post: "èˆ‡èƒºã€‚", a: "ç¾§é…¸", ans: "ç¾§é…¸", opts: ["é†‡", "é†›", "é…®"], exp: "è‚½éµæ–·è£‚ã€‚" },
            { type: 'fill', pre: "çœ‹åˆ°ã€ŒåŠ å…¥æ°¯åŒ–éµå‘ˆç¾ç´«è‰²ã€ï¼Œè¯æƒ³åˆ°", post: "ã€‚", a: "é…šé¡", ans: "é…šé¡", opts: ["é†‡é¡", "é†›é¡", "é…¸é¡"], exp: "é…šé¡æª¢é©—ã€‚" },
            { type: 'fill', pre: "çœ‹åˆ°ã€ŒåŠ å…¥å¤šå€«è©¦åŠ‘ç”¢ç”ŸéŠ€é¡ã€ï¼Œè¯æƒ³åˆ°", post: "ã€‚", a: "é†›åŸº", ans: "é†›åŸº", opts: ["é…®åŸº", "ç¾§åŸº", "ç¾¥åŸº"], exp: "é‚„åŸæ€§æª¢é©—ã€‚" },
            { type: 'fill', pre: "çœ‹åˆ°ã€ŒåŠ å…¥æ–æ—è©¦åŠ‘ç”¢ç”Ÿç´…æ²‰æ¾±ã€ï¼Œè¯æƒ³åˆ°", post: "ã€‚", a: "é†›åŸº", ans: "é†›åŸº", opts: ["é…®åŸº", "é…¯åŸº", "é†šåŸº"], exp: "æ°§åŒ–äºéŠ…æ²‰æ¾±ã€‚" },
            { type: 'fill', pre: "çœ‹åˆ°ã€ŒåŠ å…¥æº´æ°´è¤ªè‰²ã€ï¼Œè¯æƒ³åˆ°", post: "ã€‚", a: "ä¸é£½å’Œçƒ´", ans: "ä¸é£½å’Œçƒ´", opts: ["è‹¯ç’°", "çƒ·çƒ´", "é†‡é¡"], exp: "åŠ æˆåæ‡‰ã€‚" },
            { type: 'fill', pre: "çœ‹åˆ°ã€Œæ¿ƒç¡«é…¸ + åŠ ç†±ã€ï¼Œè¯æƒ³åˆ°", post: "åæ‡‰ã€‚", a: "è„«æ°´", ans: "è„«æ°´", opts: ["æ°´è§£", "æ°§åŒ–", "é‚„åŸ"], exp: "å¸¸ç”¨å‚¬åŒ–åŠ‘ã€‚" },
            { type: 'fill', pre: "çœ‹åˆ°ã€Œç…§å…‰ (UV)ã€ï¼Œè¯æƒ³åˆ°çƒ·é¡çš„", post: "åæ‡‰ã€‚", a: "å–ä»£", ans: "å–ä»£", opts: ["åŠ æˆ", "èšåˆ", "ç‡ƒç‡’"], exp: "è‡ªç”±åŸºåæ‡‰ã€‚" },
            { type: 'fill', pre: "çœ‹åˆ°ã€Œé³ã€é‰‘å‚¬åŒ–ã€ï¼Œè¯æƒ³åˆ°", post: "åæ‡‰ã€‚", a: "æ°«åŒ–", ans: "æ°«åŒ–", opts: ["æ°§åŒ–", "è„«æ°´", "æ°´è§£"], exp: "ä¸é£½å’Œçƒ´åŠ æ°«ã€‚" },
            { type: 'fill', pre: "çœ‹åˆ°ã€ŒNaOH é…’ç²¾æº¶æ¶² + å…±ç†±ã€ï¼Œè¯æƒ³åˆ°é¹µçƒ·çš„", post: "åæ‡‰ã€‚", a: "æ¶ˆå»", ans: "æ¶ˆå»", opts: ["å–ä»£", "åŠ æˆ", "é…¯åŒ–"], exp: "ç”¢ç”Ÿçƒ¯é¡ã€‚" },
            
            { type: 'text_choice', q: "æª¢é©—é…šé¡ä½¿ç”¨ï¼Ÿ", a: "æ°¯åŒ–éµ", ans: "æ°¯åŒ–éµ", o: ["æº´æ°´", "å¤šå€«è©¦åŠ‘", "æ–æ—è©¦åŠ‘"], exp: "Fe3+ é¡¯è‰²ã€‚" },
            { type: 'text_choice', q: "å€åˆ¥ä¹™çƒ·èˆ‡ä¹™çƒ¯å¯ä½¿ç”¨ï¼Ÿ", a: "æº´æ°´", ans: "æº´æ°´", o: ["æ°´", "çŸ³è•Š", "é¹½é…¸"], exp: "ä¹™çƒ¯åŠ æˆè¤ªè‰²ã€‚" },
            { type: 'text_choice', q: "åå¼è„‚è‚ªä¾†è‡ªæ¤ç‰©æ²¹çš„ï¼Ÿ", a: "éƒ¨åˆ†æ°«åŒ–", ans: "éƒ¨åˆ†æ°«åŒ–", o: ["å®Œå…¨æ°«åŒ–", "æ°§åŒ–", "çš‚åŒ–"], exp: "åŠ å·¥å‰¯ç”¢ç‰©ã€‚" },
            { type: 'text_choice', q: "é †ä¸çƒ¯äºŒé…¸åŠ ç†±è„«æ°´ç”Ÿæˆï¼Ÿ", a: "é…", ans: "é…", o: ["é…¯", "é†š", "é†‡"], exp: "é †å¼æ˜“æˆé…ã€‚" },
            { type: 'text_choice', q: "ä¸‰ç´šé†‡èˆ‡ KMnO4 åæ‡‰ï¼Ÿ", a: "ä¸åæ‡‰", ans: "ä¸åæ‡‰", o: ["è®Šç¶ è‰²", "è®Šè¤è‰²", "ç”¢ç”Ÿæ°£æ³¡"], exp: "é›£æ°§åŒ–ã€‚" },
            { type: 'text_choice', q: "éŠ€é¡åæ‡‰ä¸­ï¼ŒéŠ€é›¢å­çš„åŒ–å­¸è®ŠåŒ–æ˜¯ï¼Ÿ", a: "é‚„åŸ", ans: "é‚„åŸ", o: ["æ°§åŒ–", "æ°´è§£", "èšåˆ"], exp: "å¾—é›»å­è®Šé‡‘å±¬éŠ€ã€‚" },
            { type: 'text_choice', q: "é…¯åŒ–åæ‡‰çš„é€†åæ‡‰æ˜¯ï¼Ÿ", a: "æ°´è§£", ans: "æ°´è§£", o: ["è„«æ°´", "æ°§åŒ–", "èšåˆ"], exp: "é…¯åŠ æ°´è®Šé…¸åŠ é†‡ã€‚" },
            { type: 'text_choice', q: "ä¸‹åˆ—ä½•è€…å…·å‚™é‚„åŸæ€§ï¼Œå¯é‚„åŸå¤šå€«è©¦åŠ‘ï¼Ÿ", a: "ç”²é…¸", ans: "ç”²é…¸", o: ["ä¹™é…¸", "ä¸™é…®", "è‹¯é…š"], exp: "ç”²é…¸å«é†›åŸºã€‚" },

            // ==========================================
            // 4. ç›´è¦ºè¯æƒ³ç‰¹è¨“ (Reflex Associations)
            // ==========================================
            
            // --- çœ‹åˆ° [è©¦åŠ‘/ç¾è±¡] -> è¯æƒ³ [å®˜èƒ½åŸº/ç‰©è³ª] ---
            "ç›´è¦ºè¯æƒ³ç‰¹è¨“ (50é¡Œ)":[
            { tag: 'advanced', pre: "çœ‹åˆ°ã€ŒåŠ å…¥æ°¯åŒ–éµ (FeCl3) å‘ˆç¾ç´«è‰²ã€ï¼Œè¦é¦¬ä¸Šè¯æƒ³åˆ°", post: "ã€‚", ans: "é…šé¡ (Phenol)", opts: ["é†‡é¡", "é†›é¡", "é…¸é¡"], exp: "é€™æ˜¯é…šé¡çš„å°ˆå±¬æª¢é©—åæ‡‰ï¼Œå½¢æˆç´«è‰²çš„éŒ¯åˆç‰©ã€‚" },
            { tag: 'advanced', pre: "çœ‹åˆ°ã€ŒåŠ å…¥å¤šå€«è©¦åŠ‘ç”¢ç”ŸéŠ€é¡ã€ï¼Œè¦é¦¬ä¸Šè¯æƒ³åˆ°", post: "ã€‚", ans: "é†›åŸº (-CHO)", opts: ["é…®åŸº", "ç¾§åŸº", "ç¾¥åŸº"], exp: "é†›åŸºå…·æœ‰é‚„åŸåŠ›ï¼Œèƒ½å°‡éŠ€é›¢å­é‚„åŸæˆé‡‘å±¬éŠ€ (æœ«ç«¯ç‚”ä¹Ÿå¯ä»¥ï¼Œä½†é«˜ä¸­ä¸»è¦è€ƒé†›)ã€‚" },
            { tag: 'advanced', pre: "çœ‹åˆ°ã€ŒåŠ å…¥æ–æ—è©¦åŠ‘ç”¢ç”Ÿç´…è‰²æ²‰æ¾±ã€ï¼Œè¦é¦¬ä¸Šè¯æƒ³åˆ°", post: "ã€‚", ans: "é†›åŸº (-CHO)", opts: ["é…®åŸº", "é…¯åŸº", "é†šåŸº"], exp: "è„‚è‚ªé†›èƒ½é‚„åŸéŠ…é›¢å­ç”Ÿæˆæ°§åŒ–äºéŠ… ($Cu_2O$) ç´…è‰²æ²‰æ¾±ã€‚" },
            { tag: 'advanced', pre: "çœ‹åˆ°ã€ŒåŠ å…¥æº´æ°´ (CCl4æº¶æ¶²) è¤ªè‰²ã€ï¼Œè¦é¦¬ä¸Šè¯æƒ³åˆ°", post: "ã€‚", ans: "ä¸é£½å’Œçƒ´ (çƒ¯/ç‚”)", opts: ["è‹¯ç’°", "çƒ·çƒ´", "é†‡é¡"], exp: "æº´èˆ‡ç¢³ç¢³é›™éµæˆ–åƒéµç™¼ç”Ÿã€ŒåŠ æˆåæ‡‰ã€è€Œæ¶ˆè€—è¤ªè‰²ã€‚" },
            { tag: 'advanced', pre: "çœ‹åˆ°ã€ŒåŠ å…¥é‡‘å±¬éˆ‰ç”¢ç”Ÿæ°«æ°£ã€ï¼Œè¦é¦¬ä¸Šè¯æƒ³åˆ°", post: "ã€‚", ans: "é†‡é¡ (-OH) æˆ– é…¸", opts: ["é†šé¡", "é†›é¡", "é…®é¡"], exp: "é†‡é¡çš„ç¾¥åŸºæ°«å…·æœ‰æ´»æ€§ï¼Œå¯è¢«éˆ‰ç½®æ› (é…¸ä¹Ÿå¯ä»¥ï¼Œä½†é†‡æ˜¯ç¶“å…¸è€ƒé»)ã€‚" },
            { tag: 'advanced', pre: "çœ‹åˆ°ã€ŒåŠ å…¥ I2 (ç¢˜æ¶²) å‘ˆç¾è—é»‘è‰²ã€ï¼Œè¦é¦¬ä¸Šè¯æƒ³åˆ°", post: "ã€‚", ans: "æ¾±ç²‰", opts: ["çº–ç¶­ç´ ", "è‘¡è„ç³–", "è›‹ç™½è³ª"], exp: "é€™æ˜¯æ¾±ç²‰çš„ç‰¹å¾µåæ‡‰ï¼Œå¸¸ç”¨æ–¼ç”Ÿç‰©å¯¦é©—ã€‚" },
            { tag: 'advanced', pre: "çœ‹åˆ°ã€ŒåŠ å…¥æ¿ƒç¡é…¸è®Šé»ƒè‰² (é»ƒè›‹ç™½åæ‡‰)ã€ï¼Œè¦é¦¬ä¸Šè¯æƒ³åˆ°", post: "ã€‚", ans: "å«è‹¯ç’°çš„è›‹ç™½è³ª", opts: ["è„‚è‚ª", "æ¾±ç²‰", "çº–ç¶­ç´ "], exp: "æ¿ƒç¡é…¸æœƒèˆ‡è›‹ç™½è³ªä¸­å¸¶æœ‰è‹¯ç’°çš„èƒºåŸºé…¸(å¦‚é…ªèƒºé…¸)åæ‡‰è®Šè‰²ã€‚" },
            { tag: 'advanced', pre: "çœ‹åˆ°ã€ŒåŠ å…¥é›™ç¸®è„²è©¦åŠ‘å‘ˆç´«è‰²ã€ï¼Œè¦é¦¬ä¸Šè¯æƒ³åˆ°", post: "ã€‚", ans: "è‚½éµ (è›‹ç™½è³ª)", opts: ["é†£é¡", "è„‚è³ª", "æ ¸é…¸"], exp: "é›™ç¸®è„²è©¦åŠ‘ ($Cu^{2+}$ åœ¨é¹¼æ€§ä¸­) æª¢é©—è‚½éµ (-CONH-)ã€‚" },
        
            // --- çœ‹åˆ° [ç‰©è³ªåç¨±] -> è¯æƒ³ [åŒ–å­¸åˆ†é¡/ç‰¹æ€§] ---
            { tag: 'life', pre: "çœ‹åˆ°ã€Œè‘¡è„ç³–ã€ï¼Œè¦é¦¬ä¸Šè¯æƒ³åˆ°å®ƒæ˜¯", post: "ã€‚", ans: "å–®é†£ / é‚„åŸé†£", opts: ["é›™é†£", "éé‚„åŸé†£", "å¤šé†£"], exp: "è‘¡è„ç³–æ˜¯å¤šç¾¥åŸºé†›ï¼Œå±¬æ–¼å–®é†£ï¼Œä¸”å…·æœ‰é‚„åŸåŠ›ã€‚" },
            { tag: 'life', pre: "çœ‹åˆ°ã€Œè”—ç³–ã€ï¼Œè¦é¦¬ä¸Šè¯æƒ³åˆ°å®ƒæ˜¯", post: "ã€‚", ans: "é›™é†£ / éé‚„åŸé†£", opts: ["å–®é†£", "é‚„åŸé†£", "å¤šé†£"], exp: "è”—ç³–ç”±è‘¡è„ç³–+æœç³–çµ„æˆï¼Œä½†çµæ§‹ä¸­æ²’æœ‰æ¸¸é›¢çš„é†›/é…®åŸºï¼Œæ•…ä¸å…·é‚„åŸåŠ›ã€‚" },
            { tag: 'life', pre: "çœ‹åˆ°ã€Œçº–ç¶­ç´ ã€ï¼Œè¦é¦¬ä¸Šè¯æƒ³åˆ°å®ƒæ˜¯", post: "çš„èšåˆç‰©ã€‚", ans: "è‘¡è„ç³– (beta)", opts: ["æœç³–", "èƒºåŸºé…¸", "æ ¸è‹·é…¸"], exp: "çº–ç¶­ç´ æ˜¯ $\\beta$-è‘¡è„ç³–èšåˆè€Œæˆï¼Œäººé«”ç„¡æ³•æ¶ˆåŒ–ã€‚" },
            { tag: 'life', pre: "çœ‹åˆ°ã€Œé…¶ (Enzyme)ã€ï¼Œè¦é¦¬ä¸Šè¯æƒ³åˆ°å®ƒçš„æˆåˆ†é€šå¸¸æ˜¯", post: "ã€‚", ans: "è›‹ç™½è³ª", opts: ["é†£é¡", "è„‚è³ª", "ç¶­ç”Ÿç´ "], exp: "çµ•å¤§å¤šæ•¸çš„é…µç´ éƒ½æ˜¯è›‹ç™½è³ª (æ¥µå°‘æ•¸æ˜¯ RNA)ã€‚" },
            { tag: 'life', pre: "çœ‹åˆ°ã€Œè‚¥çš‚ã€ï¼Œè¦é¦¬ä¸Šè¯æƒ³åˆ°å®ƒæ€•", post: "ã€‚", ans: "é…¸ èˆ‡ ç¡¬æ°´", opts: ["é¹¼ èˆ‡ è»Ÿæ°´", "ç†±æ°´", "æœ‰æ©Ÿæº¶åŠ‘"], exp: "é…¸æœƒä½¿è‚¥çš‚è®Šå›è„‚è‚ªé…¸(æ²¹æ²¹çš„)ï¼Œç¡¬æ°´æœƒç”¢ç”Ÿçš‚å¢(æ²‰æ¾±)ã€‚" },
            { tag: 'life', pre: "çœ‹åˆ°ã€Œé˜¿æ–¯åŒ¹éˆã€ï¼Œè¦é¦¬ä¸Šè¯æƒ³åˆ°å®ƒå…·æœ‰", post: "çµæ§‹ã€‚", ans: "ç¾§åŸº èˆ‡ é…¯åŸº", opts: ["èƒºåŸº èˆ‡ é…®åŸº", "é†›åŸº èˆ‡ é†šåŸº", "ç£ºé…¸åŸº"], exp: "ä¹™é†¯æ°´æ¥Šé…¸ = æ°´æ¥Šé…¸(æœ‰ç¾§åŸº) + ä¹™é…(å½¢æˆé…¯åŸº)ã€‚" },
            { tag: 'life', pre: "çœ‹åˆ°ã€Œæ²¹è„‚ã€ï¼Œè¦é¦¬ä¸Šè¯æƒ³åˆ°å®ƒæ˜¯", post: "ã€‚", ans: "é…¯é¡ (ä¸‰é…¸ç”˜æ²¹é…¯)", opts: ["é…¸é¡", "é†‡é¡", "çƒ´é¡"], exp: "æ²¹è„‚ = ç”˜æ²¹ + 3åˆ†å­è„‚è‚ªé…¸ (é…¯åŒ–è€Œæˆ)ã€‚" },
            { tag: 'life', pre: "çœ‹åˆ°ã€Œè€ç¶¸ (Nylon)ã€ï¼Œè¦é¦¬ä¸Šè¯æƒ³åˆ°å®ƒå«æœ‰", post: "éµã€‚", ans: "é†¯èƒºéµ (è‚½éµ)", opts: ["é…¯éµ", "é†šéµ", "é›™ç¡«éµ"], exp: "è€ç¶¸æ˜¯èšé†¯èƒºï¼Œçµæ§‹é¡ä¼¼è›‹ç™½è³ªã€‚" },
            
            // --- çœ‹åˆ° [åæ‡‰æ¢ä»¶] -> è¯æƒ³ [åæ‡‰é¡å‹] ---
            { tag: 'advanced', pre: "çœ‹åˆ°ã€Œæ¿ƒç¡«é…¸ + åŠ ç†±ã€ï¼Œé€šå¸¸æ˜¯åœ¨é€²è¡Œ", post: "ã€‚", ans: "è„«æ°´ (å¦‚é…¯åŒ–/æ¶ˆå»)", opts: ["æ°´è§£", "æ°§åŒ–", "é‚„åŸ"], exp: "æ¿ƒç¡«é…¸æ˜¯å¼·è„«æ°´åŠ‘ã€‚é†‡+é…¸$\to$é…¯ï¼›é†‡$\to$çƒ¯/é†šï¼Œéƒ½éœ€è¦å®ƒã€‚" },
            { tag: 'advanced', pre: "çœ‹åˆ°ã€Œç…§å…‰ (UV)ã€ï¼Œé€šå¸¸æ˜¯çƒ·é¡çš„", post: "åæ‡‰ã€‚", ans: "é¹µåŒ– (å–ä»£)", opts: ["åŠ æˆ", "èšåˆ", "ç‡ƒç‡’"], exp: "çƒ·é¡å¾ˆå®‰å®šï¼Œåªæœ‰åœ¨ç…§å…‰æˆ–é«˜æº«ä¸‹æ‰æœƒèˆ‡é¹µç´ ç™¼ç”Ÿè‡ªç”±åŸºå–ä»£ã€‚" },
            { tag: 'advanced', pre: "çœ‹åˆ°ã€Œé³ (Ni)ã€é‰‘ (Pt) å‚¬åŒ–ã€ï¼Œé€šå¸¸æ˜¯çƒ¯/ç‚”çš„", post: "åæ‡‰ã€‚", ans: "æ°«åŒ– (åŠ æˆ)", opts: ["æ°§åŒ–", "è„«æ°´", "æ°´è§£"], exp: "ä¸é£½å’Œçƒ´åŠ æ°«è®Šæˆé£½å’Œçƒ´ (ä¾‹å¦‚æ¤ç‰©æ²¹æ°«åŒ–è®Šäººé€ å¥¶æ²¹)ã€‚" },
            { tag: 'advanced', pre: "çœ‹åˆ°ã€Œæ°«æ°§åŒ–éˆ‰ (NaOH) æ°´æº¶æ¶² + å…±ç†±ã€ï¼Œé€šå¸¸æ˜¯", post: "ã€‚", ans: "çš‚åŒ– (æˆ–é¹µçƒ·æ°´è§£)", opts: ["é…¯åŒ–", "è„«æ°´", "èšåˆ"], exp: "é…¯é¡åœ¨é¹¼æ€§ä¸‹æ°´è§£ç¨±ç‚ºçš‚åŒ–ï¼›é¹µçƒ·åœ¨é¹¼æ€§ä¸‹æ°´è§£æˆé†‡ã€‚" },
            { tag: 'advanced', pre: "çœ‹åˆ°ã€Œæ°«æ°§åŒ–éˆ‰ (NaOH) é…’ç²¾æº¶æ¶² + å…±ç†±ã€ï¼Œé€šå¸¸æ˜¯é¹µçƒ·çš„", post: "åæ‡‰ã€‚", ans: "æ¶ˆå» (ç”¢ç”Ÿçƒ¯)", opts: ["å–ä»£ (ç”¢ç”Ÿé†‡)", "åŠ æˆ", "é…¯åŒ–"], exp: "é€™æ˜¯ä¸€å€‹è¶…ç´šé™·é˜±ï¼NaOH(aq)æ˜¯å–ä»£æˆé†‡ï¼›NaOH(alc)æ˜¯æ¶ˆå»æˆçƒ¯ã€‚" },
        
            // --- çœ‹åˆ° [ç‰¹æ®Šæ€§è³ª] -> è¯æƒ³ [ç‰©è³ª] ---
            { tag: 'functional', pre: "çœ‹åˆ°ã€Œæœ‰æ°´æœé¦™å‘³ã€ï¼Œè¦é¦¬ä¸Šè¯æƒ³åˆ°", post: "ã€‚", ans: "é…¯é¡", opts: ["é†šé¡", "é…®é¡", "é†›é¡"], exp: "ä½ç´šé…¯é¡é€šå¸¸å…·æœ‰èŠ±æœé¦™ï¼Œç”¨æ–¼é¦™æ–™ã€‚" },
            { tag: 'functional', pre: "çœ‹åˆ°ã€Œæœ‰é­šè…¥å‘³ã€ï¼Œè¦é¦¬ä¸Šè¯æƒ³åˆ°", post: "ã€‚", ans: "èƒºé¡", opts: ["é†¯èƒº", "é…¸é¡", "é†‡é¡"], exp: "èƒºé¡ (å¦‚ç”²èƒº) é€šå¸¸æœ‰é›£èçš„é­šè…¥å‘³ã€‚" },
            { tag: 'functional', pre: "çœ‹åˆ°ã€Œå¤è€çš„éº»é†‰åŠ‘ã€ï¼Œè¦é¦¬ä¸Šè¯æƒ³åˆ°", post: "ã€‚", ans: "ä¹™é†š æˆ– æ°¯ä»¿", opts: ["ä¹™é†‡", "ä¹™é…¸", "ä¹™ç‚”"], exp: "ä¹™é†šå’Œæ°¯ä»¿æ—©æœŸéƒ½ç•¶ä½œéº»é†‰åŠ‘ï¼Œä½†å‰¯ä½œç”¨å¤§ã€‚" },
            { tag: 'functional', pre: "çœ‹åˆ°ã€Œå†¬å¤©æœƒçµå†°çš„é…¸ã€ï¼Œè¦é¦¬ä¸Šè¯æƒ³åˆ°", post: "ã€‚", ans: "ä¹™é…¸ (å†°é†‹é…¸)", opts: ["ç”²é…¸", "è‰é…¸", "é¹½é…¸"], exp: "ç´”ä¹™é…¸ç†”é»ç´„ 16.7åº¦ï¼Œå†¬å¤©æ˜“çµå‡ï¼Œæ•…ç¨±å†°é†‹é…¸ã€‚" },
            { tag: 'functional', pre: "çœ‹åˆ°ã€Œå»å…‰æ°´ã€ï¼Œè¦é¦¬ä¸Šè¯æƒ³åˆ°", post: "ã€‚", ans: "ä¸™é…®", opts: ["ä¹™é…¸ä¹™é…¯", "ä¹™é†š", "ç”²é†‡"], exp: "ä¸™é…®æ˜¯æœ‰æ©Ÿæº¶åŠ‘ï¼Œèƒ½æº¶è§£æŒ‡ç”²æ²¹ã€‚" },
            { tag: 'functional', pre: "çœ‹åˆ°ã€Œç¦é¦¬æ—ã€ï¼Œè¦é¦¬ä¸Šè¯æƒ³åˆ°", post: "ã€‚", ans: "ç”²é†›æ°´æº¶æ¶²", opts: ["ç”²é†‡", "ç”²é…¸", "ä¹™é†›"], exp: "37% ç”²é†›æ°´æº¶æ¶²ï¼Œé˜²è…ç”¨ã€‚" },
            { tag: 'functional', pre: "çœ‹åˆ°ã€Œé›»çŸ³æ°£ã€ï¼Œè¦é¦¬ä¸Šè¯æƒ³åˆ°", post: "ã€‚", ans: "ä¹™ç‚”", opts: ["ä¹™çƒ¯", "ç”²çƒ·", "ä¸™çƒ·"], exp: "é›»çŸ³åŠ æ°´ç”¢ç”Ÿä¹™ç‚”ï¼Œç‡ƒç‡’æº«åº¦æ¥µé«˜ã€‚" },
        ]
    };

    // ================= 2. æ ¸å¿ƒé‚è¼¯ =================
    let selectedChapters = new Set();
    let currentList = [];
    let currentIndex = 0;
    let score = 0;
    let mistakes = [];

    // åˆå§‹åŒ–é¸å–®
    function renderMenu() {
        const grid = document.getElementById('chapter-list');
        if (!grid) return;
        grid.innerHTML = "";
        Object.keys(chemData).forEach(cat => {
            const card = document.createElement('div');
            card.className = 'chapter-card';
            card.onclick = () => toggleSelection(card, cat);
            card.innerHTML = `<div class="ch-title">${cat}</div><div class="ch-count">${chemData[cat].length} é¡Œ</div>`;
            grid.appendChild(card);
        });
    }

    function toggleSelection(card, cat) {
        if (selectedChapters.has(cat)) {
            selectedChapters.delete(cat);
            card.classList.remove('selected');
        } else {
            selectedChapters.add(cat);
            card.classList.add('selected');
        }
        updateStats();
    }

    function updateStats() {
        let total = 0;
        selectedChapters.forEach(cat => total += chemData[cat].length);
        document.getElementById('selected-count').innerText = selectedChapters.size;
        document.getElementById('total-selected-items').innerText = total;
        document.getElementById('btn-start-quiz').disabled = (selectedChapters.size === 0);
    }

    // è§£æ±ºç™½ç•«é¢ï¼šç¢ºä¿ window è¼‰å…¥å¾ŒåŸ·è¡Œ
    window.onload = function() {
        renderMenu();
        const total = Object.values(chemData).reduce((sum, list) => sum + list.length, 0);
        const totalEl = document.getElementById('total-db-items');
        if (totalEl) totalEl.innerText = total;
    };

    function switchView(view) {
        document.querySelectorAll('.view-section').forEach(sec => sec.classList.remove('active'));
        document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
        
        if (view === 'note') {
            document.getElementById('view-note').classList.add('active');
            document.querySelectorAll('.tab-btn')[0].classList.add('active');
        } else {
            document.getElementById('view-quiz').classList.add('active');
            document.querySelectorAll('.tab-btn')[1].classList.add('active');
            document.getElementById('quiz-menu').style.display = 'block';
            document.getElementById('quiz-play').style.display = 'none';
            document.getElementById('quiz-result').style.display = 'none';
            selectedChapters.clear();
            renderMenu();
            updateStats();
        }
        window.scrollTo(0, 0);
    }

    // ================= æ¸¬é©—é‚è¼¯ =================

    function prepareQuiz() {
        let total = 0;
        selectedChapters.forEach(cat => total += chemData[cat].length);
        document.getElementById('modal-total-items').innerText = total;
        document.getElementById('quiz-settings-modal').style.display = 'flex';
    }

    function closeModal() { document.getElementById('quiz-settings-modal').style.display = 'none'; }

    function confirmStartQuiz() {
        let allItems = [];
        selectedChapters.forEach(cat => allItems = allItems.concat(chemData[cat]));
        let count = parseInt(document.getElementById('quiz-num-input').value) || 10;
        shuffle(allItems);
        currentList = allItems.slice(0, count);
        closeModal();
        startQuizFlow();
    }

    function startQuizFlow() {
        currentIndex = 0; score = 0; mistakes = [];
        document.getElementById('quiz-menu').style.display = 'none';
        document.getElementById('quiz-play').style.display = 'block';
        loadQuestion();
    }

    function loadQuestion() {
        if (currentIndex >= currentList.length) { showResult(); return; }
        const q = currentList[currentIndex];
        document.getElementById('q-curr').innerText = currentIndex + 1;
        document.getElementById('q-total').innerText = currentList.length;
        document.getElementById('score').innerText = Math.round(score);
        document.getElementById('progress-fill').style.width = `${(currentIndex / currentList.length) * 100}%`;
        document.getElementById('feedback').style.display = 'none';
        
        const qArea = document.getElementById('question-area');
        const aArea = document.getElementById('answer-area');
        qArea.innerHTML = ''; aArea.innerHTML = '';

        if (q.type === 'fill') {
            const card = document.createElement('div');
            card.className = 'quiz-card';
            card.innerHTML = `<div class="q-text">${q.pre} <div class="drop-slot" id="slot">?</div> ${q.post || ''}</div>`;
            qArea.appendChild(card);
            aArea.className = 'drag-pool';
            [q.ans, ...q.opts].sort(() => 0.5 - Math.random()).forEach(opt => {
                const btn = document.createElement('div');
                btn.className = 'drag-item';
                btn.innerText = opt;
                btn.onclick = () => checkFillAnswer(opt, q);
                aArea.appendChild(btn);
            });
        } else {
            const card = document.createElement('div');
            card.className = 'quiz-card';
            card.innerHTML = q.type.includes('image') ? `${q.svg}<div class="q-text" style="margin-top:15px">${q.q}</div>` : `<div class="q-text">${q.q}</div>`;
            qArea.appendChild(card);
            aArea.className = 'options-grid';
            // ç¢ºä¿é¸é …ä¸é‡è¤‡ä¸¦åŒ…å«æ­£ç¢ºç­”æ¡ˆ
            const opts = [...new Set([...q.o, q.a])].sort(() => 0.5 - Math.random());
            opts.forEach(opt => {
                const btn = document.createElement('button');
                btn.className = 'opt-btn';
                btn.innerText = opt;
                btn.onclick = () => checkChoiceAnswer(btn, opt, q.a, q.exp);
                aArea.appendChild(btn);
            });
        }
    }

    function checkChoiceAnswer(btn, userAns, correctAns, exp) {
        document.querySelectorAll('.opt-btn').forEach(b => b.disabled = true);
        if (userAns === correctAns) {
            btn.classList.add('correct'); score += 100 / currentList.length;
            showFeedback(true, exp);
        } else {
            btn.classList.add('wrong');
            document.querySelectorAll('.opt-btn').forEach(b => { if(b.innerText === correctAns) b.classList.add('correct'); });
            showFeedback(false, `æ­£è§£ï¼š${correctAns}<br>${exp}`);
            mistakes.push(currentList[currentIndex]);
        }
    }

    function checkFillAnswer(userAns, qData) {
        const slot = document.getElementById('slot');
        if (slot.classList.contains('filled')) return;
        slot.innerText = userAns; slot.classList.add('filled');
        document.querySelectorAll('.drag-item').forEach(i => i.style.pointerEvents = 'none');
        if (userAns === qData.ans) {
            slot.style.color = 'var(--success)'; score += 100 / currentList.length;
            showFeedback(true, qData.exp);
        } else {
            slot.style.color = 'var(--error)';
            showFeedback(false, `æ­£è§£ï¼š${qData.ans}<br>${qData.exp}`);
            mistakes.push(qData);
        }
    }

    function showFeedback(isCorrect, text) {
        const fb = document.getElementById('feedback');
        document.getElementById('feedback-text').innerHTML = isCorrect ? `âœ… ç­”å°äº†ï¼<br><small>${text}</small>` : `âŒ ç­”éŒ¯äº†...<br><small>${text}</small>`;
        fb.style.display = 'block';
    }

    function nextQuestion() { currentIndex++; loadQuestion(); }

    function showResult() {
        document.getElementById('quiz-play').style.display = 'none';
        document.getElementById('quiz-result').style.display = 'block';
        document.getElementById('final-score').innerText = Math.round(score);
        if (mistakes.length > 0) {
            document.getElementById('mistake-section').style.display = 'block';
            const list = document.getElementById('mistake-list');
            list.innerHTML = "";
            mistakes.forEach(m => {
                let displayQ = m.type === 'fill' ? m.pre + ' __ ' + (m.post||'') : (m.type.includes('image') ? 'çœ‹åœ–é¡Œ' : m.q);
                list.innerHTML += `<div class="mistake-card"><b>${displayQ}</b><br>æ­£è§£ï¼š${m.a || m.ans}</div>`;
            });
        }
    }

    function retryQuiz() { shuffle(currentList); startQuizFlow(); }

    function shuffle(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
    }
</script>
</body>
</html>
